{"version":3,"sources":["webpack:///./src/actions/types.js","webpack:///./src/services/api.js","webpack:///./src/actions/user.js","webpack:///./src/locales/index.js","webpack:///./src/locales/en.js","webpack:///./src/locales/es.js","webpack:///./src/reducers/org.js","webpack:///./src/services/firstInteraction.js","webpack:///./src/reducers/room.js","webpack:///./src/reducers/user.js","webpack:///./src/reducers/index.js","webpack:///./src/reducers/dialog.js","webpack:///./src/actions/dialog.js","webpack:///./src/components/room/video.jsx","webpack:///./src/components/ui/button.js","webpack:///./src/components/ui/dialog.jsx","webpack:///./src/components/ui/form.js","webpack:///./src/layout/settings.jsx","webpack:///./src/layout/user.jsx","webpack:///./src/layout/index.jsx","webpack:///./src/components/ui/login.jsx","webpack:///./src/components/ui/page.jsx","webpack:///./src/routes/landing.jsx","webpack:///./src/actions/org.js","webpack:///./src/routes/404.jsx","webpack:///./src/components/ui/tabs.js","webpack:///./src/locales/countries.js","webpack:///./src/components/org/createRoom.jsx","webpack:///./src/components/org/rooms.jsx","webpack:///./src/components/org/settings.jsx","webpack:///./src/components/org/users.jsx","webpack:///./src/routes/org.jsx","webpack:///./src/components/room/canvas.jsx","webpack:///./src/components/room/events.js","webpack:///./src/actions/room.js","webpack:///./src/components/room/peers.jsx","webpack:///./src/routes/room.jsx","webpack:///./src/routes/index.jsx","webpack:///./src/index.jsx"],"names":["DIALOG_SHOW","DIALOG_HIDE","ORG_FETCH_FULFILLED","ORG_FETCH_USERS_FULFILLED","ORG_RESOLVE_REQUEST_FULFILLED","ORG_RESET","ROOM_ADD_PHOTO","ROOM_JOIN","ROOM_PEER_JOIN","ROOM_PEER_LEAVE","ROOM_PEER_POINTER","ROOM_PEER_SIGNAL","ROOM_PEER_STREAM","ROOM_MOVE_PHOTO","ROOM_REMOVE_PHOTO","ROOM_RESET","USER_REFRESH_SESSION_FULFILLED","USER_REFRESH_SESSION_REJECTED","USER_SAVE_SETTINGS","USER_SIGNOUT","USER_START_STREAM","USER_TOGGLE_AUDIO","api","API","_classCallCheck","this","baseURL","__API__","body","_ref","endpoint","_ref$headers","headers","_ref$method","method","authorization","Authorization","FormData","JSON","stringify","fetch","concat","then","res","status","Error","get","split","arrayBuffer","json","token","refreshSession","session","type","types","payload","dispatch","catch","locales","en","NotFound","description","goBack","Org","CreateRoom","inviteOnly","title","flag","name","peerLimit","publicRoom","submit","users","CTA","copy","button","ManageUsers","approve","decline","empty","Nav","createRoom","customize","manageUsers","settings","Settings","dangerZone","organization","remove","save","Signup","Room","joining","welcome","Rooms","peers","User","audioInput","videoInput","signIn","es","availableLocales","Object","keys","translations","forEach","locale","merge","orgReducer","combineReducers","hasLoaded","state","arguments","length","undefined","id","action","_id","isActive","isAdmin","isUser","pendingRequests","reduce","count","isRequest","rooms","sort","_ref2","_ref3","a","b","localeCompare","org_toConsumableArray","_ref4","_ref5","filter","_ref6","slug","_ref7","_ref8","_ref9","user","resolution","map","org_objectSpread","_ref10","firstInteraction","FirstInteraction","firstInteraction_classCallCheck","promises","getPromise","bind","onKey","onPointer","touches","Touches","window","filtered","preventSimulated","on","addEventListener","isReady","Promise","resolve","push","disable","removeEventListener","onFirstInteraction","roomReducer","connection","destroy","room_toConsumableArray","peer","room_objectSpread","pointer","signal","video","document","createElement","srcObject","stream","onloadedmetadata","WaitForFirstInteraction","play","addStream","photos","photo","origin","x","y","socket","localStoreKeyPrefix","sessionKey","storedSession","parse","localStorage","getItem","setAuthorization","userReducer","isAudioMuted","isAuth","orgs","profile","_action$payload","setItem","getTracks","track","stop","getAudioTracks","enabled","removeItem","muted","rootReducer","dialog","_objectSpread","_defineProperty","i18n","loadingBar","org","room","hide","show","Video","props","_this","video_classCallCheck","_possibleConstructorReturn","_getPrototypeOf","call","dom","React","createRef","Component","current","appendChild","react_default","ref","propTypes","PropTypes","object","isRequired","styled","withConfig","displayName","componentId","primary","Overlay","div","Wrapper","width","Heading","h2","Content","Dialog","children","isShowing","react_redux_i18n_build","value","onClick","ti","defaultProps","node","string","bool","func","connect","form","settings_classCallCheck","settings_getPrototypeOf","onSubmit","settings_assertThisInitialized","PureComponent","_this2","navigator","mediaDevices","enumerateDevices","devices","audioInputs","kind","videoInputs","setState","e","_this$props","isStreaming","preventDefault","target","location","reload","_this$props$settings","_this$state","ui_dialog","ui_form","defaultValue","deviceId","label","key","className","ui_button","shape","_ref5$user","showDialog","signout","toggleAudio","user_Wrapper","getVideoTracks","room_video","src","layout_settings","oneOfType","_ref2$user","Route","loadingBarStyle","backgroundColor","zIndex","Layout","build_default","style","layout_Route","layout_user","Login","login_classCallCheck","login_getPrototypeOf","loginWithGoogle","login_assertThisInitialized","onMessage","popupWatcher","clearInterval","data","onSession","indexOf","screenX","screenY","left","screen","w","top","height","h","win","open","setInterval","postMessage","_this$props2","Icon","icon","TiSocialGooglePlus","Scroll","Page","page_Wrapper","element","arrayOf","Grid","Orgs","Features","ul","Landing","landing_classCallCheck","landing_getPrototypeOf","landing_assertThisInitialized","fetchOrgs","wasAuth","hideDialog","_this$props3","history","signup","finally","_this$props4","page","landing_Heading","Link","to","pathname","login","TiGroup","_ref4$user","Status","Description","Alternative","_404_Wrapper","countries","code","Users","createRoom_classCallCheck","createRoom_getPrototypeOf","createRoom_assertThisInitialized","parseInt","createRoom_toConsumableArray","checked","tabs","required","Countries","autoFocus","min","max","createRoom_Users","getState","Listing","removeRoom","list","__COUNTRY_FLAGS_CDN__","limit","onRemove","number","_ref2$org","DangerZone","Form","org_settings_classCallCheck","org_settings_getPrototypeOf","org_settings_assertThisInitialized","tab","replace","update","withRouter","removeUser","resolveRequest","users_Scroll","users_User","uploadButton","Logo","Name","Url","Actions","Cover","cover","Section","reset","match","params","image","updateImage","input","accept","onchange","file","_slicedToArray","files","blob","click","requestAccess","org_Layout","__DOMAIN__","__BASENAME__","execCommand","org_Content","components_org_rooms","org_createRoom","org_settings","components_org_users","append","Canvas","canvas_classCallCheck","canvas_getPrototypeOf","onDrop","canvas_assertThisInitialized","onPointerWheel","onResize","scale","canvas","loadPhotos","onDragOver","onPointerStart","onPointerMove","onPointerEnd","addWheelListener","draw","removeWheelListener","clientX","clientY","canvas_slicedToArray","dataTransfer","getPointer","reader","FileReader","onload","send","result","substr","readAsDataURL","_this$getPointer","intersects","reverse","dragging","shiftKey","offset","_this$getPointer2","_channel","readyState","Int32Array","_dragging$photo","deltaY","normalized","Math","innerWidth","innerHeight","round","_this3","img","Image","_this4","ctx","getContext","translate","textAlign","textBaseline","fillStyle","font","fillText","I18n","t","drawImage","_ref11","_pointer","radius","beginPath","arc","PI","fill","clip","restore","_ref12","_ref12$room","Events","events_classCallCheck","events_getPrototypeOf","events_assertThisInitialized","_this$props$match$par","startStream","connectToServer","getUserMedia","audio","exact","events_objectSpread","facingMode","_ref$match$params","_this$props2$match$pa","currentOrg","currentSlug","hideLoading","WebSocket","CONNECTING","close","event","addPhoto","join","movePhoto","peerJoin","peerLeave","peerSignal","removePhoto","connectToPeer","_this$props5","showLoading","onopen","onclose","onerror","onmessage","initiator","_this$props6","peerPointer","peerStream","Peer","buffer","events_toConsumableArray","Peers","peers_Listing","room_canvas","events","components_room_peers","store","storedLocale","browserLocale","component","requiresAuth","requiresNoAuth","rest","_objectWithoutProperties","isForbidden","_extends","render","Redirect","Root","layout","Switch","routes_Route","path","compose","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","productionCompose","createStore","applyMiddleware","thunkMiddleware","promiseMiddleware","loadingBarMiddleware","languages","language","browserLanguage","userLanguage","toLowerCase","syncTranslationWithStore","loadTranslations","setLocale","createBrowserHistory","basename","hash","mount","getElementById","react_redux_es","Router","routes"],"mappings":"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ACNwT,KAAM,MAER,CACExT,KAAM,YACNwT,KAAM,MAER,CACExT,KAAM,UACNwT,KAAM,MAER,CACExT,KAAM,aACNwT,KAAM,MAER,CACExT,KAAM,UACNwT,KAAM,MAER,CACExT,KAAM,UACNwT,KAAM,MAER,CACExT,KAAM,aACNwT,KAAM,MAER,CACExT,KAAM,WACNwT,KAAM,MAER,CACExT,KAAM,UACNwT,KAAM,MAER,CACExT,KAAM,UACNwT,KAAM,MAER,CACExT,KAAM,SACNwT,KAAM,MAER,CACExT,KAAM,QACNwT,KAAM,MAER,CACExT,KAAM,UACNwT,KAAM,MAER,CACExT,KAAM,SACNwT,KAAM,MAER,CACExT,KAAM,kCACNwT,KAAM,MAER,CACExT,KAAM,mCACNwT,KAAM,MAER,CACExT,KAAM,yBACNwT,KAAM,MAER,CACExT,KAAM,WACNwT,KAAM,MAER,CACExT,KAAM,gBACNwT,KAAM,MAER,CACExT,KAAM,SACNwT,KAAM,MAER,CACExT,KAAM,iCACNwT,KAAM,MAER,CACExT,KAAM,oBACNwT,KAAM,MAER,CACExT,KAAM,WACNwT,KAAM,MAER,CACExT,KAAM,eACNwT,KAAM,MAER,CACExT,KAAM,UACNwT,KAAM,MAER,CACExT,KAAM,WACNwT,KAAM,MAER,CACExT,KAAM,WACNwT,KAAM,MAER,CACExT,KAAM,SACNwT,KAAM,MAER,CACExT,KAAM,aACNwT,KAAM,MAER,CACExT,KAAM,YACNwT,KAAM,SAER,CACExT,KAAM,iBACNwT,KAAM,MAER,CACExT,KAAM,2BACNwT,KAAM,MAER,CACExT,KAAM,OACNwT,KAAM,MAER,CACExT,KAAM,QACNwT,KAAM,MAER,CACExT,KAAM,QACNwT,KAAM,MAER,CACExT,KAAM,mBACNwT,KAAM,MAER,CACExT,KAAM,0BACNwT,KAAM,MAER,CACExT,KAAM,WACNwT,KAAM,MAER,CACExT,KAAM,UACNwT,KAAM,MAER,CACExT,KAAM,QACNwT,KAAM,MAER,CACExT,KAAM,wCACNwT,KAAM,MAER,CACExT,KAAM,eACNwT,KAAM,MAER,CACExT,KAAM,aACNwT,KAAM,MAER,CACExT,KAAM,gBACNwT,KAAM,MAER,CACExT,KAAM,UACNwT,KAAM,MAER,CACExT,KAAM,OACNwT,KAAM,MAER,CACExT,KAAM,UACNwT,KAAM,MAER,CACExT,KAAM,SACNwT,KAAM,MAER,CACExT,KAAM,iBACNwT,KAAM,MAER,CACExT,KAAM,UACNwT,KAAM,MAER,CACExT,KAAM,WACNwT,KAAM,MAER,CACExT,KAAM,WACNwT,KAAM,MAER,CACExT,KAAM,qBACNwT,KAAM,MAER,CACExT,KAAM,UACNwT,KAAM,MAER,CACExT,KAAM,QACNwT,KAAM,MAER,CACExT,KAAM,cACNwT,KAAM,MAER,CACExT,KAAM,oBACNwT,KAAM,MAER,CACExT,KAAM,UACNwT,KAAM,MAER,CACExT,KAAM,UACNwT,KAAM,MAER,CACExT,KAAM,WACNwT,KAAM,MAER,CACExT,KAAM,iBACNwT,KAAM,MAER,CACExT,KAAM,8BACNwT,KAAM,MAER,CACExT,KAAM,gBACNwT,KAAM,MAER,CACExT,KAAM,OACNwT,KAAM,MAER,CACExT,KAAM,UACNwT,KAAM,MAER,CACExT,KAAM,SACNwT,KAAM,MAER,CACExT,KAAM,gBACNwT,KAAM,MAER,CACExT,KAAM,mBACNwT,KAAM,MAER,CACExT,KAAM,8BACNwT,KAAM,MAER,CACExT,KAAM,QACNwT,KAAM,MAER,CACExT,KAAM,SACNwT,KAAM,MAER,CACExT,KAAM,UACNwT,KAAM,MAER,CACExT,KAAM,UACNwT,KAAM,MAER,CACExT,KAAM,QACNwT,KAAM,MAER,CACExT,KAAM,YACNwT,KAAM,MAER,CACExT,KAAM,SACNwT,KAAM,MAER,CACExT,KAAM,YACNwT,KAAM,MAER,CACExT,KAAM,UACNwT,KAAM,MAER,CACExT,KAAM,aACNwT,KAAM,MAER,CACExT,KAAM,OACNwT,KAAM,MAER,CACExT,KAAM,YACNwT,KAAM,MAER,CACExT,KAAM,WACNwT,KAAM,MAER,CACExT,KAAM,SACNwT,KAAM,MAER,CACExT,KAAM,gBACNwT,KAAM,MAER,CACExT,KAAM,SACNwT,KAAM,MAER,CACExT,KAAM,QACNwT,KAAM,MAER,CACExT,KAAM,oCACNwT,KAAM,MAER,CACExT,KAAM,gCACNwT,KAAM,MAER,CACExT,KAAM,WACNwT,KAAM,MAER,CACExT,KAAM,YACNwT,KAAM,MAER,CACExT,KAAM,UACNwT,KAAM,MAER,CACExT,KAAM,UACNwT,KAAM,MAER,CACExT,KAAM,QACNwT,KAAM,MAER,CACExT,KAAM,YACNwT,KAAM,MAER,CACExT,KAAM,4BACNwT,KAAM,MAER,CACExT,KAAM,OACNwT,KAAM,MAER,CACExT,KAAM,UACNwT,KAAM,MAER,CACExT,KAAM,cACNwT,KAAM,MAER,CACExT,KAAM,SACNwT,KAAM,MAER,CACExT,KAAM,QACNwT,KAAM,MAER,CACExT,KAAM,UACNwT,KAAM,MAER,CACExT,KAAM,QACNwT,KAAM,MAER,CACExT,KAAM,SACNwT,KAAM,MAER,CACExT,KAAM,SACNwT,KAAM,MAER,CACExT,KAAM,aACNwT,KAAM,MAER,CACExT,KAAM,QACNwT,KAAM,MAER,CACExT,KAAM,WACNwT,KAAM,MAER,CACExT,KAAM,yCACNwT,KAAM,MAER,CACExT,KAAM,qBACNwT,KAAM,MAER,CACExT,KAAM,SACNwT,KAAM,MAER,CACExT,KAAM,aACNwT,KAAM,MAER,CACExT,KAAM,mCACNwT,KAAM,MAER,CACExT,KAAM,SACNwT,KAAM,MAER,CACExT,KAAM,UACNwT,KAAM,MAER,CACExT,KAAM,UACNwT,KAAM,MAER,CACExT,KAAM,UACNwT,KAAM,MAER,CACExT,KAAM,QACNwT,KAAM,MAER,CACExT,KAAM,gBACNwT,KAAM,MAER,CACExT,KAAM,YACNwT,KAAM,MAER,CACExT,KAAM,aACNwT,KAAM,MAER,CACExT,KAAM,QACNwT,KAAM,MAER,CACExT,KAAM,6CACNwT,KAAM,MAER,CACExT,KAAM,aACNwT,KAAM,MAER,CACExT,KAAM,SACNwT,KAAM,MAER,CACExT,KAAM,WACNwT,KAAM,MAER,CACExT,KAAM,WACNwT,KAAM,MAER,CACExT,KAAM,OACNwT,KAAM,MAER,CACExT,KAAM,QACNwT,KAAM,MAER,CACExT,KAAM,mBACNwT,KAAM,MAER,CACExT,KAAM,aACNwT,KAAM,MAER,CACExT,KAAM,aACNwT,KAAM,MAER,CACExT,KAAM,YACNwT,KAAM,MAER,CACExT,KAAM,UACNwT,KAAM,MAER,CACExT,KAAM,SACNwT,KAAM,MAER,CACExT,KAAM,kCACNwT,KAAM,MAER,CACExT,KAAM,uBACNwT,KAAM,MAER,CACExT,KAAM,SACNwT,KAAM,MAER,CACExT,KAAM,WACNwT,KAAM,MAER,CACExT,KAAM,aACNwT,KAAM,MAER,CACExT,KAAM,aACNwT,KAAM,MAER,CACExT,KAAM,UACNwT,KAAM,MAER,CACExT,KAAM,aACNwT,KAAM,MAER,CACExT,KAAM,UACNwT,KAAM,MAER,CACExT,KAAM,UACNwT,KAAM,MAER,CACExT,KAAM,QACNwT,KAAM,MAER,CACExT,KAAM,QACNwT,KAAM,MAER,CACExT,KAAM,cACNwT,KAAM,MAER,CACExT,KAAM,gBACNwT,KAAM,MAER,CACExT,KAAM,cACNwT,KAAM,MAER,CACExT,KAAM,YACNwT,KAAM,MAER,CACExT,KAAM,QACNwT,KAAM,MAER,CACExT,KAAM,UACNwT,KAAM,MAER,CACExT,KAAM,OACNwT,KAAM,MAER,CACExT,KAAM,iBACNwT,KAAM,MAER,CACExT,KAAM,2BACNwT,KAAM,MAER,CACExT,KAAM,SACNwT,KAAM,MAER,CACExT,KAAM,OACNwT,KAAM,MAER,CACExT,KAAM,WACNwT,KAAM,MAER,CACExT,KAAM,QACNwT,KAAM,MAER,CACExT,KAAM,sBACNwT,KAAM,MAER,CACExT,KAAM,SACNwT,KAAM,MAER,CACExT,KAAM,mBACNwT,KAAM,MAER,CACExT,KAAM,WACNwT,KAAM,MAER,CACExT,KAAM,OACNwT,KAAM,MAER,CACExT,KAAM,cACNwT,KAAM,MAER,CACExT,KAAM,WACNwT,KAAM,MAER,CACExT,KAAM,SACNwT,KAAM,MAER,CACExT,KAAM,WACNwT,KAAM,MAER,CACExT,KAAM,cACNwT,KAAM,MAER,CACExT,KAAM,QACNwT,KAAM,MAER,CACExT,KAAM,UACNwT,KAAM,MAER,CACExT,KAAM,UACNwT,KAAM,MAER,CACExT,KAAM,qBACNwT,KAAM,MAER,CACExT,KAAM,SACNwT,KAAM,MAER,CACExT,KAAM,mBACNwT,KAAM,MAER,CACExT,KAAM,+CACNwT,KAAM,MAER,CACExT,KAAM,wBACNwT,KAAM,MAER,CACExT,KAAM,cACNwT,KAAM,MAER,CACExT,KAAM,6BACNwT,KAAM,MAER,CACExT,KAAM,4BACNwT,KAAM,MAER,CACExT,KAAM,mCACNwT,KAAM,MAER,CACExT,KAAM,QACNwT,KAAM,MAER,CACExT,KAAM,aACNwT,KAAM,MAER,CACExT,KAAM,wBACNwT,KAAM,MAER,CACExT,KAAM,eACNwT,KAAM,MAER,CACExT,KAAM,UACNwT,KAAM,MAER,CACExT,KAAM,SACNwT,KAAM,MAER,CACExT,KAAM,aACNwT,KAAM,MAER,CACExT,KAAM,eACNwT,KAAM,MAER,CACExT,KAAM,YACNwT,KAAM,MAER,CACExT,KAAM,4BACNwT,KAAM,MAER,CACExT,KAAM,WACNwT,KAAM,MAER,CACExT,KAAM,WACNwT,KAAM,MAER,CACExT,KAAM,kBACNwT,KAAM,MAER,CACExT,KAAM,UACNwT,KAAM,MAER,CACExT,KAAM,eACNwT,KAAM,MAER,CACExT,KAAM,+CACNwT,KAAM,MAER,CACExT,KAAM,cACNwT,KAAM,MAER,CACExT,KAAM,QACNwT,KAAM,MAER,CACExT,KAAM,YACNwT,KAAM,MAER,CACExT,KAAM,QACNwT,KAAM,MAER,CACExT,KAAM,WACNwT,KAAM,MAER,CACExT,KAAM,yBACNwT,KAAM,MAER,CACExT,KAAM,YACNwT,KAAM,MAER,CACExT,KAAM,SACNwT,KAAM,MAER,CACExT,KAAM,cACNwT,KAAM,MAER,CACExT,KAAM,uBACNwT,KAAM,MAER,CACExT,KAAM,4BACNwT,KAAM,MAER,CACExT,KAAM,aACNwT,KAAM,MAER,CACExT,KAAM,+BACNwT,KAAM,MAER,CACExT,KAAM,WACNwT,KAAM,MAER,CACExT,KAAM,cACNwT,KAAM,MAER,CACExT,KAAM,OACNwT,KAAM,MAER,CACExT,KAAM,UACNwT,KAAM,MAER,CACExT,KAAM,QACNwT,KAAM,MAER,CACExT,KAAM,sBACNwT,KAAM,MAER,CACExT,KAAM,UACNwT,KAAM,MAER,CACExT,KAAM,SACNwT,KAAM,MAER,CACExT,KAAM,eACNwT,KAAM,MAER,CACExT,KAAM,2BACNwT,KAAM,MAER,CACExT,KAAM,SACNwT,KAAM,MAER,CACExT,KAAM,SACNwT,KAAM,MAER,CACExT,KAAM,UACNwT,KAAM,MAER,CACExT,KAAM,uBACNwT,KAAM,MAER,CACExT,KAAM,iBACNwT,KAAM,MAER,CACExT,KAAM,UACNwT,KAAM,UAER,CACExT,KAAM,mBACNwT,KAAM,UAER,CACExT,KAAM,WACNwT,KAAM,UAER,CACExT,KAAM,QACNwT,KAAM,UAER,CACExT,KAAM,iBACNwT,KAAM,MAER,CACExT,KAAM,gBACNwT,KAAM,MAER,CACExT,KAAM,uCACNwT,KAAM,MAER,CACExT,KAAM,UACNwT,KAAM,MAER,CACExT,KAAM,aACNwT,KAAM,MAER,CACExT,KAAM,UACNwT,KAAM,MAER,CACExT,KAAM,oCACNwT,KAAM,MAER,CACExT,KAAM,WACNwT,KAAM,MAER,CACExT,KAAM,0BACNwT,KAAM,MAER,CACExT,KAAM,uBACNwT,KAAM,MAER,CACExT,KAAM,oBACNwT,KAAM,MAER,CACExT,KAAM,iBACNwT,KAAM,MAER,CACExT,KAAM,QACNwT,KAAM,MAER,CACExT,KAAM,SACNwT,KAAM,MAER,CACExT,KAAM,WACNwT,KAAM,wkCCh/BV,IAAMC,GAAQ5I,KAAOM,IAAVL,WAAA,CAAAC,YAAA,oBAAAC,YAAA,gBAAGH,CAAH,6R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","file":"code/main.94a0fb6f8e95056fb234.js","sourcesContent":["// DIALOG\nexport const DIALOG_SHOW = 'DIALOG/SHOW';\nexport const DIALOG_HIDE = 'DIALOG/HIDE';\n\n// ORG\nexport const ORG_CREATE_ROOM = 'ORG/CREATE_ROOM';\nexport const ORG_CREATE_ROOM_FULFILLED = 'ORG/CREATE_ROOM_FULFILLED';\nexport const ORG_FETCH = 'ORG/FETCH';\nexport const ORG_FETCH_FULFILLED = 'ORG/FETCH_FULFILLED';\nexport const ORG_FETCH_ROOMS = 'ORG/FETCH_ROOMS';\nexport const ORG_FETCH_ROOMS_FULFILLED = 'ORG/FETCH_ROOMS_FULFILLED';\nexport const ORG_FETCH_USERS = 'ORG/FETCH_USERS';\nexport const ORG_FETCH_USERS_FULFILLED = 'ORG/FETCH_USERS_FULFILLED';\nexport const ORG_REMOVE = 'ORG/REMOVE';\nexport const ORG_REMOVE_FULFILLED = 'ORG/REMOVE_FULFILLED';\nexport const ORG_REMOVE_ROOM = 'ORG/REMOVE_ROOM';\nexport const ORG_REMOVE_ROOM_FULFILLED = 'ORG/REMOVE_ROOM_FULFILLED';\nexport const ORG_REMOVE_USER = 'ORG/REMOVE_USER';\nexport const ORG_REMOVE_USER_FULFILLED = 'ORG/REMOVE_USER_FULFILLED';\nexport const ORG_RESOLVE_REQUEST = 'ORG/RESOLVE_REQUEST';\nexport const ORG_RESOLVE_REQUEST_FULFILLED = 'ORG/RESOLVE_REQUEST_FULFILLED';\nexport const ORG_REQUEST_ACCESS = 'ORG/REQUEST_ACCESS';\nexport const ORG_REQUEST_ACCESS_FULFILLED = 'ORG/REQUEST_ACCESS_FULFILLED';\nexport const ORG_RESET = 'ORG/RESET';\nexport const ORG_SIGNUP = 'ORG/SIGNUP';\nexport const ORG_SIGNUP_FULFILLED = 'ORG/SIGNUP_FULFILLED';\nexport const ORG_UPDATE = 'ORG/UPDATE';\nexport const ORG_UPDATE_FULFILLED = 'ORG/UPDATE_FULFILLED';\nexport const ORG_UPDATE_IMAGE = 'ORG/UPDATE_IMAGE';\nexport const ORG_UPDATE_USER = 'ORG/UPDATE_USER';\nexport const ORG_UPDATE_USER_FULFILLED = 'ORG/UPDATE_USER_FULFILLED';\n\n// ROOM\nexport const ROOM_ADD_PHOTO = 'ROOM/ADD_PHOTO';\nexport const ROOM_ERROR = 'ROOM/ERROR';\nexport const ROOM_JOIN = 'ROOM/JOIN';\nexport const ROOM_PEER_JOIN = 'ROOM/PEER_JOIN';\nexport const ROOM_PEER_LEAVE = 'ROOM/PEER_LEAVE';\nexport const ROOM_PEER_POINTER = 'ROOM/PEER_POINTER';\nexport const ROOM_PEER_SIGNAL = 'ROOM/PEER_SIGNAL';\nexport const ROOM_PEER_STREAM = 'ROOM/PEER_STREAM';\nexport const ROOM_MOVE_PHOTO = 'ROOM/MOVE_PHOTO';\nexport const ROOM_REMOVE_PHOTO = 'ROOM/REMOVE_PHOTO';\nexport const ROOM_RESET = 'ROOM/RESET';\n\n// USER\nexport const USER_FETCH_ORGS = 'USER/FETCH_ORGS';\nexport const USER_FETCH_ORGS_FULFILLED = 'USER/FETCH_ORGS_FULFILLED';\nexport const USER_REFRESH_SESSION = 'USER/REFRESH_SESSION';\nexport const USER_REFRESH_SESSION_FULFILLED = 'USER/REFRESH_SESSION_FULFILLED';\nexport const USER_REFRESH_SESSION_REJECTED = 'USER/REFRESH_SESSION_REJECTED';\nexport const USER_SAVE_SETTINGS = 'USER/SAVE_SETTINGS';\nexport const USER_SIGNOUT = 'USER/SIGNOUT';\nexport const USER_START_STREAM = 'USER/START_STREAM';\nexport const USER_TOGGLE_AUDIO = 'USER/TOGGLE_AUDIO';\n","class API {\n  constructor() {\n    this.baseURL = __API__;\n  }\n\n  fetch({\n    body,\n    endpoint,\n    headers = {},\n    method = 'GET',\n  }) {\n    const {\n      authorization,\n      baseURL,\n    } = this;\n    if (authorization) {\n      headers.Authorization = authorization;\n    }\n    if (body && !(body instanceof FormData)) {\n      body = JSON.stringify(body);\n      headers['Content-Type'] = 'application/json';\n    }\n    return fetch(\n      `${baseURL}${endpoint}`,\n      {\n        body,\n        headers,\n        method,\n      }\n    )\n      .then((res) => {\n        const { headers, status } = res;\n        if (status < 200 || status >= 400) {\n          throw new Error(status);\n        }\n        const type = (headers.get('Content-Type') || '').split(';')[0];\n        switch (type) {\n          case 'text/plain':\n            return res.arrayBuffer();\n          case 'application/json':\n            return res.json();\n          default:\n            return res;\n        }\n      });\n  }\n\n  setAuthorization(token) {\n    if (token) {\n      this.authorization = `Bearer ${token}`;\n    } else {\n      delete this.authorization;\n    }\n    this.token = token;\n  }\n}\n\nexport default new API();\n","import { setLocale as reduxSetLocale } from 'react-redux-i18n';\nimport * as types from './types';\nimport API from '@/services/api';\n\nexport function fetchOrgs() {\n  return {\n    type: types.USER_FETCH_ORGS,\n    payload: API.fetch({\n      endpoint: 'user/orgs',\n    }),\n  };\n}\n\nexport function refreshSession(session) {\n  if (session) {\n    return {\n      type: types.USER_REFRESH_SESSION_FULFILLED,\n      payload: session,\n    };\n  }\n  return dispatch => dispatch({\n    type: types.USER_REFRESH_SESSION,\n    payload: API.fetch({\n      endpoint: 'user',\n    }),\n  }).catch(() => {});\n}\n\nexport function saveSettings({ audioInput, videoInput }) {\n  return {\n    type: types.USER_SAVE_SETTINGS,\n    payload: { audioInput, videoInput },\n  };\n}\n\nexport function setLocale(locale) {\n  return (dispatch) => {\n    localStorage.setItem('BABELCHAT::LOCALE', locale);\n    dispatch(reduxSetLocale(locale));\n  };\n}\n\nexport function signout() {\n  return {\n    type: types.USER_SIGNOUT,\n  };\n}\n\nexport function startStream(stream) {\n  return (dispatch, getState) => {\n    const { user: { isAudioMuted } } = getState();\n    if (isAudioMuted) {\n      stream.getAudioTracks()\n        .forEach((track) => { track.enabled = false; });\n    }\n    dispatch({\n      type: types.USER_START_STREAM,\n      payload: { stream },\n    });\n  };\n}\n\nexport function toggleAudio() {\n  return {\n    type: types.USER_TOGGLE_AUDIO,\n  };\n}\n","import diff from 'deep-diff';\nimport { recursive as merge } from 'merge';\nimport { loadTranslations, setLocale, syncTranslationWithStore } from 'react-redux-i18n';\nimport en from './en';\nimport es from './es';\n\nconst locales = {\n  en,\n  es,\n};\nconst availableLocales = Object.keys(locales);\nconst defaultLocale = 'en';\n\n// Populate locales with default literals\nconst translations = {};\navailableLocales.forEach((locale) => {\n  translations[locale] = merge(true, locales[defaultLocale], locales[locale]);\n});\n\n// Translations loader handler (for hot-reloading)\nexport const load = (store) => {\n  store.dispatch(loadTranslations(translations));\n};\n\nexport default (store) => {\n  // Locale Autodetection\n  const storedLocale = localStorage.getItem('BABELCHAT::LOCALE');\n  const browserLocale = (\n    (window.navigator.languages ? window.navigator.languages[0] : null)\n    || window.navigator.language\n    || window.navigator.browserLanguage\n    || window.navigator.userLanguage\n    || defaultLocale\n  ).substr(0, 2).toLowerCase();\n\n  let locale = defaultLocale;\n  if (~availableLocales.indexOf(storedLocale)) locale = storedLocale;\n  else if (~availableLocales.indexOf(browserLocale)) locale = browserLocale;\n\n  // Setup react-i18nify\n  syncTranslationWithStore(store);\n  load(store);\n  store.dispatch(setLocale(locale));\n\n  if (!__PRODUCTION__) {\n    // Warn about missing translations\n    const missing = availableLocales\n      .reduce((missing, locale) => {\n        if (locale === defaultLocale) {\n          return missing;\n        }\n        const keys = diff(locales[defaultLocale], locales[locale])\n          .reduce((missing, { kind, path }) => {\n            if (kind === 'E') {\n              return missing;\n            }\n            return [\n              ...missing,\n              path.join('.'),\n            ];\n          }, []);\n        if (!keys.length) {\n          return missing;\n        }\n        return [\n          ...missing,\n          `\\nMissing translations for \"${locale.toUpperCase()}\" locale:`,\n          ...keys,\n        ];\n      }, []);\n    if (missing.length) {\n      console.warn(missing.join('\\n'));\n    }\n  }\n};\n","export default {\n  NotFound: {\n    description: 'This is not the web page you\\'re looking for.',\n    goBack: 'Take me back home',\n  },\n  Org: {\n    CreateRoom: {\n      inviteOnly: 'Invite only',\n      title: 'Create a room',\n      flag: 'Flag',\n      name: 'Name',\n      peerLimit: 'Peer limit',\n      publicRoom: 'Public room',\n      submit: 'Create room',\n      users: 'Students',\n    },\n    CTA: {\n      copy: 'Are you an academy manager/teacher?',\n      button: 'Try it now',\n    },\n    ManageUsers: {\n      title: 'Manage students',\n      approve: 'Approve',\n      decline: 'Decline',\n      empty: 'Your organization doesn\\'t have any students yet.',\n    },\n    Nav: {\n      createRoom: 'Create room',\n      customize: 'Customize',\n      manageUsers: 'Manage students',\n      settings: 'Settings',\n    },\n    Settings: {\n      dangerZone: 'Danger Zone',\n      title: 'Settings',\n      name: 'Name',\n      organization: 'Organization',\n      remove: 'Remove organization',\n      save: 'Save settings',\n    },\n    Signup: {\n      title: 'Create an account',\n      name: 'Organization name',\n      submit: 'Create account',\n    },\n  },\n  Room: {\n    joining: 'Joining room...',\n    welcome: 'Welcome to: \"%{name}\"',\n  },\n  Rooms: {\n    peers: '%{count}/%{limit} peers',\n  },\n  User: {\n    Settings: {\n      title: 'Settings',\n      audioInput: 'Audio input',\n      save: 'Save settings',\n      videoInput: 'Video input',\n    },\n    signIn: 'Sign-In with google',\n  },\n};\n","export default {\n  NotFound: {\n    description: 'Esta no es la pgina que ests buscando.',\n    goBack: 'Volver al inicio',\n  },\n  Org: {\n    CreateRoom: {\n      title: 'Crear una sala',\n      flag: 'Bandera',\n      name: 'Nombre',\n      peerLimit: 'Lmite de parcipantes',\n      submit: 'Crear sala',\n    },\n    CTA: {\n      copy: 'Eres gestor(a)/profesor(a) de una academia?',\n      button: 'Prubalo ahora',\n    },\n    ManageUsers: {\n      title: 'Estudiantes',\n      approve: 'Aprobar',\n      decline: 'Rechazar',\n    },\n    Nav: {\n      createRoom: 'Crear sala',\n      customize: 'Personalizar',\n      manageUsers: 'Estudiantes',\n      settings: 'Preferencias',\n    },\n    Settings: {\n      dangerZone: 'Danger zone',\n      title: 'Preferencias',\n      name: 'Nombre',\n      organization: 'Organizacin',\n      remove: 'Eliminar organizacin',\n      save: 'Guardar preferencias',\n    },\n    Signup: {\n      title: 'Crear una cuenta',\n      name: 'Nombre de la organizacin',\n      submit: 'Crear cuenta',\n    },\n  },\n  Room: {\n    joining: 'Entrando en la sala...',\n    welcome: 'Bienvenido a: \"%{name}\"',\n  },\n  Rooms: {\n    peers: '%{count}/%{limit} personas',\n  },\n  User: {\n    Settings: {\n      title: 'Preferencias',\n      audioInput: 'Entrada de audio',\n      save: 'Guardar preferencias',\n      videoInput: 'Entrada de vdeo',\n    },\n    signIn: 'Iniciar Sesin con google',\n  },\n};\n","import { combineReducers } from 'redux';\nimport * as types from '@/actions/types';\n\nconst hasLoaded = (\n  state = false,\n  action\n) => {\n  switch (action.type) {\n    case types.ORG_FETCH_FULFILLED:\n      return true;\n    case types.ORG_RESET:\n      return false;\n    default:\n      return state;\n  }\n};\n\nconst id = (\n  state = '',\n  action\n) => {\n  switch (action.type) {\n    case types.ORG_FETCH_FULFILLED:\n      return action.payload._id;\n    case types.ORG_RESET:\n      return '';\n    default:\n      return state;\n  }\n};\n\nconst isActive = (\n  state = false,\n  action\n) => {\n  switch (action.type) {\n    case types.ORG_FETCH_FULFILLED:\n      return action.payload.isActive || false;\n    case types.ORG_RESET:\n      return false;\n    default:\n      return state;\n  }\n};\n\nconst isAdmin = (\n  state = false,\n  action\n) => {\n  switch (action.type) {\n    case types.ORG_FETCH_FULFILLED:\n      return action.payload.isAdmin || false;\n    case types.ORG_RESET:\n      return false;\n    default:\n      return state;\n  }\n};\n\nconst isUser = (\n  state = false,\n  action\n) => {\n  switch (action.type) {\n    case types.ORG_FETCH_FULFILLED:\n      return action.payload.isUser || false;\n    case types.ORG_REQUEST_ACCESS_FULFILLED:\n      return true;\n    case types.ORG_RESET:\n      return false;\n    default:\n      return state;\n  }\n};\n\nconst name = (\n  state = '',\n  action\n) => {\n  switch (action.type) {\n    case types.ORG_FETCH_FULFILLED:\n    case types.ORG_UPDATE_FULFILLED:\n      return action.payload.name;\n    case types.ORG_RESET:\n      return '';\n    default:\n      return state;\n  }\n};\n\nconst pendingRequests = (\n  state = 0,\n  action\n) => {\n  switch (action.type) {\n    case types.ORG_FETCH_USERS_FULFILLED:\n      return action.payload.reduce((count, { isRequest }) => (\n        count + (isRequest ? 1 : 0)\n      ), 0);\n    case types.ORG_RESOLVE_REQUEST_FULFILLED:\n      return state - 1;\n    case types.ORG_RESET:\n      return 0;\n    default:\n      return state;\n  }\n};\n\nconst rooms = (\n  state = [],\n  action\n) => {\n  switch (action.type) {\n    case types.ORG_FETCH_ROOMS_FULFILLED:\n      return action.payload.sort(({ name: a }, { name: b }) => a.localeCompare(b));\n    case types.ORG_CREATE_ROOM_FULFILLED:\n      return [\n        ...state,\n        action.payload,\n      ].sort(({ name: a }, { name: b }) => a.localeCompare(b));\n    case types.ORG_REMOVE_ROOM_FULFILLED:\n      return state.filter(({ slug }) => (slug !== action.payload.slug));\n    case types.ORG_RESET:\n      return [];\n    default:\n      return state;\n  }\n};\n\nconst users = (\n  state = [],\n  action\n) => {\n  switch (action.type) {\n    case types.ORG_FETCH_USERS_FULFILLED:\n      return action.payload.sort(({ name: a }, { name: b }) => a.localeCompare(b));\n    case types.ORG_REMOVE_USER_FULFILLED:\n      return state.filter(({ _id }) => (_id !== action.payload.user));\n    case types.ORG_RESOLVE_REQUEST_FULFILLED:\n      if (action.payload.resolution === 'approve') {\n        return state.map((user) => {\n          if (user._id === action.payload.user) {\n            return {\n              ...user,\n              isRequest: undefined,\n            };\n          }\n          return user;\n        });\n      }\n      return state.filter(({ _id }) => (_id !== action.payload.user));\n    case types.ORG_RESET:\n      return [];\n    default:\n      return state;\n  }\n};\n\nconst orgReducer = combineReducers({\n  hasLoaded,\n  id,\n  isActive,\n  isAdmin,\n  isUser,\n  name,\n  pendingRequests,\n  rooms,\n  users,\n});\n\nexport default orgReducer;\n","\nimport Touches from 'touches';\n\nclass FirstInteraction {\n  constructor() {\n    this.promises = [];\n    this.getPromise = this.getPromise.bind(this);\n    this.onKey = this.onKey.bind(this);\n    this.onPointer = this.onPointer.bind(this);\n    this.touches = Touches(window, {\n      filtered: true,\n      preventSimulated: false,\n    }).on('start', this.onPointer).on('end', this.onPointer);\n    window.addEventListener('keydown', this.onKey, false);\n    window.addEventListener('keyup', this.onKey, false);\n  }\n\n  getPromise() {\n    const { isReady, promises } = this;\n    return new Promise((resolve) => {\n      if (isReady) {\n        resolve();\n        return;\n      }\n      promises.push(resolve);\n    });\n  }\n\n  onFirstInteraction() {\n    const { promises, touches } = this;\n    touches.disable();\n    window.removeEventListener('keydown', this.onKey);\n    window.removeEventListener('keyup', this.onKey);\n    this.isReady = true;\n    promises.forEach(resolve => resolve());\n  }\n\n  onKey() {\n    this.onFirstInteraction();\n  }\n\n  onPointer() {\n    this.onFirstInteraction();\n  }\n}\n\nexport default (new FirstInteraction()).getPromise;\n","import { combineReducers } from 'redux';\nimport * as types from '@/actions/types';\nimport WaitForFirstInteraction from '@/services/firstInteraction';\n\nconst name = (\n  state = '',\n  action\n) => {\n  switch (action.type) {\n    case types.ROOM_JOIN:\n      return action.payload.name;\n    case types.ROOM_RESET:\n      return '';\n    default:\n      return state;\n  }\n};\n\nconst peers = (\n  state = [],\n  action\n) => {\n  switch (action.type) {\n    case types.ROOM_JOIN:\n      state.forEach(({ connection }) => (\n        connection.destroy()\n      ));\n      return action.payload.peers;\n    case types.ROOM_PEER_JOIN:\n      return [\n        ...state,\n        action.payload.peer,\n      ];\n    case types.ROOM_PEER_LEAVE:\n      return state.filter(\n        ({ connection, peer }) => {\n          if (peer === action.payload.peer) {\n            connection.destroy();\n            return true;\n          }\n          return false;\n        }\n      );\n    case types.ROOM_PEER_POINTER:\n      return state.map(\n        (peer) => {\n          if (peer.peer === action.payload.peer) {\n            return {\n              ...peer,\n              pointer: action.payload.pointer,\n            };\n          }\n          return peer;\n        }\n      );\n    case types.ROOM_PEER_SIGNAL:\n      state.forEach(({ connection, peer }) => {\n        if (peer === action.payload.peer) {\n          connection.signal(action.payload.signal);\n        }\n      });\n      return state;\n    case types.ROOM_PEER_STREAM:\n      return state.map(\n        (peer) => {\n          if (peer.peer === action.payload.peer) {\n            const video = document.createElement('video');\n            video.srcObject = action.payload.stream;\n            video.onloadedmetadata = () => (\n              WaitForFirstInteraction()\n                .then(() => video.play())\n            );\n            return {\n              ...peer,\n              video,\n            };\n          }\n          return peer;\n        }\n      );\n    case types.USER_START_STREAM:\n      state.forEach(({ connection }) => {\n        connection.addStream(action.payload.stream);\n      });\n      return state;\n    case types.ROOM_RESET:\n      state.forEach(({ connection }) => (\n        connection.destroy()\n      ));\n      return [];\n    default:\n      return state;\n  }\n};\n\nconst photos = (\n  state = [],\n  action\n) => {\n  switch (action.type) {\n    case types.ROOM_JOIN:\n      return action.payload.photos;\n    case types.ROOM_ADD_PHOTO:\n      return [\n        ...state,\n        action.payload,\n      ];\n    case types.ROOM_MOVE_PHOTO:\n      return state.map((photo) => {\n        if (photo._id === action.payload.photo) {\n          return {\n            ...photo,\n            origin: {\n              x: action.payload.origin.x,\n              y: action.payload.origin.y,\n            },\n          };\n        }\n        return photo;\n      });\n    case types.ROOM_REMOVE_PHOTO:\n      return state.filter(({ _id }) => (_id !== action.payload.photo));\n    case types.ROOM_RESET:\n      return [];\n    default:\n      return state;\n  }\n};\n\nconst socket = (\n  state = false,\n  action\n) => {\n  switch (action.type) {\n    case types.ROOM_JOIN:\n      return action.payload.socket;\n    case types.ROOM_RESET:\n      return false;\n    default:\n      return state;\n  }\n};\n\nconst roomReducer = combineReducers({\n  name,\n  peers,\n  photos,\n  socket,\n});\n\nexport default roomReducer;\n","import { combineReducers } from 'redux';\nimport * as types from '@/actions/types';\nimport API from '@/services/api';\nimport WaitForFirstInteraction from '@/services/firstInteraction';\n\nconst localStoreKeyPrefix = 'BABELCHAT::';\nconst sessionKey = `${localStoreKeyPrefix}SESSION`;\nconst storedSession = JSON.parse(\n  localStorage.getItem(sessionKey) || 'false'\n);\nif (storedSession) {\n  API.setAuthorization(storedSession.token);\n}\n\nconst isAudioMuted = (\n  state = false,\n  action\n) => {\n  switch (action.type) {\n    case types.USER_TOGGLE_AUDIO:\n      return !state;\n    default:\n      return state;\n  }\n};\n\nconst isAuth = (\n  state = !!storedSession,\n  action\n) => {\n  switch (action.type) {\n    case types.USER_REFRESH_SESSION_FULFILLED:\n      return true;\n    case types.USER_REFRESH_SESSION_REJECTED:\n    case types.USER_SIGNOUT:\n      return false;\n    default:\n      return state;\n  }\n};\n\nconst orgs = (\n  state = [],\n  action\n) => {\n  switch (action.type) {\n    case types.USER_FETCH_ORGS_FULFILLED:\n      return action.payload.sort(({ name: a }, { name: b }) => a.localeCompare(b));\n    case types.USER_SIGNOUT:\n      return [];\n    default:\n      return state;\n  }\n};\n\nconst profile = (\n  state = storedSession ? storedSession.profile : {},\n  action\n) => {\n  switch (action.type) {\n    case types.USER_REFRESH_SESSION_FULFILLED:\n      return action.payload.profile;\n    case types.USER_REFRESH_SESSION_REJECTED:\n    case types.USER_SIGNOUT:\n      return {};\n    default:\n      return state;\n  }\n};\n\nconst settings = (\n  state = {\n    audioInput: localStorage.getItem(`${localStoreKeyPrefix}audioInput`) || '',\n    videoInput: localStorage.getItem(`${localStoreKeyPrefix}videoInput`) || '',\n  },\n  action\n) => {\n  switch (action.type) {\n    case types.USER_SAVE_SETTINGS: {\n      const { audioInput, videoInput } = action.payload;\n      localStorage.setItem(`${localStoreKeyPrefix}audioInput`, audioInput || '');\n      localStorage.setItem(`${localStoreKeyPrefix}videoInput`, videoInput || '');\n      return {\n        audioInput,\n        videoInput,\n      };\n    }\n    default:\n      return state;\n  }\n};\n\nconst stream = (\n  state = false,\n  action\n) => {\n  switch (action.type) {\n    case types.USER_START_STREAM:\n      return action.payload.stream;\n    case types.ROOM_RESET:\n      if (state) {\n        state.getTracks()\n          .forEach(track => track.stop());\n      }\n      return false;\n    case types.USER_TOGGLE_AUDIO:\n      if (state) {\n        state.getAudioTracks()\n          .forEach((track) => { track.enabled = !track.enabled; });\n      }\n      return state;\n    default:\n      return state;\n  }\n};\n\nconst token = (\n  state = storedSession ? storedSession.token : '',\n  action\n) => {\n  switch (action.type) {\n    case types.USER_REFRESH_SESSION_FULFILLED:\n      API.setAuthorization(action.payload.token);\n      localStorage.setItem(sessionKey, JSON.stringify(action.payload));\n      return action.payload.token;\n    case types.USER_REFRESH_SESSION_REJECTED:\n    case types.USER_SIGNOUT:\n      API.setAuthorization(false);\n      localStorage.removeItem(sessionKey);\n      return '';\n    default:\n      return state;\n  }\n};\n\nconst video = (\n  state = false,\n  action\n) => {\n  switch (action.type) {\n    case types.USER_START_STREAM: {\n      const video = document.createElement('video');\n      video.muted = true;\n      video.srcObject = action.payload.stream;\n      video.onloadedmetadata = () => (\n        WaitForFirstInteraction()\n          .then(() => video.play())\n      );\n      return video;\n    }\n    case types.ROOM_RESET:\n      if (state) {\n        state.srcObject = null;\n      }\n      return false;\n    default:\n      return state;\n  }\n};\n\nconst userReducer = combineReducers({\n  isAudioMuted,\n  isAuth,\n  orgs,\n  profile,\n  settings,\n  stream,\n  token,\n  video,\n});\n\nexport default userReducer;\n","import { combineReducers } from 'redux';\nimport { i18nReducer as i18n } from 'react-redux-i18n';\nimport { loadingBarReducer as loadingBar } from 'react-redux-loading-bar';\nimport dialog from './dialog';\nimport org from './org';\nimport room from './room';\nimport user from './user';\n\nconst rootReducer = combineReducers({\n  dialog,\n  i18n,\n  loadingBar,\n  org,\n  room,\n  user,\n});\n\nexport default rootReducer;\n","import * as types from '@/actions/types';\n\nexport default (\n  state = {},\n  action\n) => {\n  switch (action.type) {\n    case types.DIALOG_SHOW:\n      return {\n        ...state,\n        [action.payload.id]: true,\n      };\n    case types.DIALOG_HIDE:\n      return {\n        ...state,\n        [action.payload.id]: false,\n      };\n    default:\n      return state;\n  }\n};\n","import * as types from './types';\n\nexport function hide(id) {\n  return {\n    type: types.DIALOG_HIDE,\n    payload: { id },\n  };\n}\n\nexport function show(id) {\n  return {\n    type: types.DIALOG_SHOW,\n    payload: { id },\n  };\n}\n","import PropTypes from 'prop-types';\nimport React, { Component } from 'react';\n\nclass Video extends Component {\n  constructor(props) {\n    super(props);\n    this.dom = React.createRef();\n  }\n\n  componentDidMount() {\n    const { dom } = this;\n    const { video } = this.props;\n    dom.current.appendChild(video);\n  }\n\n  shouldComponentUpdate() {\n    return false;\n  }\n\n  render() {\n    const { dom } = this;\n    return (\n      <div ref={dom} />\n    );\n  }\n}\n\nVideo.propTypes = {\n  // eslint-disable-next-line react/forbid-prop-types\n  video: PropTypes.object.isRequired,\n};\n\nexport default Video;\n","import styled from 'styled-components';\n\nexport default styled.button`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 0.5rem 1rem;\n  margin: 0;\n  background-color: ${props => (props.primary ? '#393' : '#111')};\n  color: #eee;\n  border: 1px solid #151515;\n  border-radius: 2px;\n  outline: 0;\n  font-family: inherit;\n  font-size: inherit;\n  font-weight: 700;\n  transition: background-color ease-out .2s;\n  will-change: background-color;\n  cursor: pointer;\n  > span {\n    margin-left: 0.5rem;\n  }\n  &:hover {\n    background-color: #393;\n  }\n`;\n","import PropTypes from 'prop-types';\nimport React from 'react';\nimport { TiTimes } from 'react-icons/ti';\nimport { connect } from 'react-redux';\nimport { Translate } from 'react-redux-i18n';\nimport styled from 'styled-components';\nimport { hide } from '@/actions/dialog';\n\nconst Overlay = styled.div`\n  position: fixed;\n  top: 0;\n  left: 0;\n  bottom: 0;\n  width: 100%;\n  background: rgba(0, 0, 0, .75);\n  z-index: 100000;\n`;\n\nconst Wrapper = styled.div`\n  position: absolute;\n  top: 20%;\n  left: 50%;\n  transform: translate(-50%, 0);\n  width: ${props => props.width};\n  display: flex;\n  flex-direction: column;\n  border-radius: 2px;\n`;\n\nconst Heading = styled.h2`\n  flex-shrink: 0;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  height: 40px;\n  margin: 0;\n  font-size: 1.25em;\n  padding: 0 1rem;\n  background: #393;\n  color: #eee;\n  border-radius: 2px 2px 0 0;\n  > a {\n    display: flex;\n    text-decoration: none;\n    font-size: 1.5em;\n    cursor: pointer;\n  }\n`;\n\nconst Content = styled.div`\n  padding: 1rem;\n  background: #eee;\n  color: #353535;\n  border-radius: 0 0 2px 2px;\n`;\n\nconst Dialog = ({\n  children,\n  id,\n  isShowing,\n  title,\n  width,\n  hide,\n}) => (isShowing ? (\n  <Overlay>\n    <Wrapper width={width || '400px'}>\n      <Heading>\n        <Translate value={title || `${id}.title`} />\n        <a\n          onClick={() => hide(id)}\n        >\n          <TiTimes />\n        </a>\n      </Heading>\n      <Content>\n        {children}\n      </Content>\n    </Wrapper>\n  </Overlay>\n) : null);\n\nDialog.defaultProps = {\n  title: undefined,\n  width: undefined,\n};\n\nDialog.propTypes = {\n  children: PropTypes.node.isRequired,\n  id: PropTypes.string.isRequired,\n  isShowing: PropTypes.bool.isRequired,\n  title: PropTypes.string,\n  width: PropTypes.string,\n  hide: PropTypes.func.isRequired,\n};\n\nexport default connect(\n  ({ dialog }, { id }) => ({\n    isShowing: dialog[id] || false,\n  }),\n  {\n    hide,\n  }\n)(Dialog);\n","import styled from 'styled-components';\n\nexport default styled.form`\n  > div {\n    margin-top: 0.5rem;\n    text-align: left;\n    &:first-child {\n      margin-top: 0;    \n    }\n    > label {\n      display: block;\n      width: 100%;\n      font-weight: 700;\n    }\n    > input, > select {\n      display: block;\n      font-family: inherit;\n      box-sizing: border-box;\n      width: 100%;\n      padding: 0.5rem;\n      cursor: pointer;\n      border: 1px solid #ccc;\n    }\n    > button {\n      margin: 1rem auto 0;\n      padding: 0.5rem 1rem;\n      cursor: pointer;\n    }\n  }\n`;\n","import PropTypes from 'prop-types';\nimport React, { PureComponent } from 'react';\nimport { TiTick } from 'react-icons/ti';\nimport { connect } from 'react-redux';\nimport { Translate } from 'react-redux-i18n';\nimport { hide } from '@/actions/dialog';\nimport { saveSettings as save } from '@/actions/user';\nimport Button from '@/components/ui/button';\nimport Dialog from '@/components/ui/dialog';\nimport Form from '@/components/ui/form';\n\nclass Settings extends PureComponent {\n  constructor(props) {\n    super(props);\n    this.onSubmit = this.onSubmit.bind(this);\n    this.state = {};\n  }\n\n  componentDidMount() {\n    navigator.mediaDevices.enumerateDevices()\n      .then((devices) => {\n        const audioInputs = devices.filter(({ kind }) => (kind === 'audioinput'));\n        const videoInputs = devices.filter(({ kind }) => (kind === 'videoinput'));\n        this.setState({\n          audioInputs,\n          videoInputs,\n        });\n      })\n      .catch(() => {});\n  }\n\n  onSubmit(e) {\n    const { hide, isStreaming, save } = this.props;\n    e.preventDefault();\n    const { target: form } = e;\n    const audioInput = form.audioInput.value;\n    const videoInput = form.videoInput.value;\n    save({ audioInput, videoInput });\n    hide('User.Settings');\n    if (isStreaming) {\n      window.location.reload();\n    }\n  }\n\n  render() {\n    const {\n      settings: {\n        audioInput,\n        videoInput,\n      },\n    } = this.props;\n    const {\n      audioInputs,\n      videoInputs,\n    } = this.state;\n    if (!audioInputs || !videoInputs) {\n      return null;\n    }\n    return (\n      <Dialog\n        id=\"User.Settings\"\n      >\n        <Form onSubmit={this.onSubmit}>\n          <div>\n            <label><Translate value=\"User.Settings.audioInput\" /></label>\n            <select name=\"audioInput\" defaultValue={audioInput}>\n              {audioInputs.map(({ deviceId, label }) => (\n                <option key={deviceId} value={deviceId}>{label}</option>\n              ))}\n            </select>\n          </div>\n          <div>\n            <label><Translate value=\"User.Settings.videoInput\" /></label>\n            <select name=\"videoInput\" defaultValue={videoInput}>\n              {videoInputs.map(({ deviceId, label }) => (\n                <option key={deviceId} value={deviceId}>{label}</option>\n              ))}\n            </select>\n          </div>\n          <div className=\"submit\">\n            <Button type=\"submit\">\n              <TiTick />\n              <Translate value=\"User.Settings.save\" />\n            </Button>\n          </div>\n        </Form>\n      </Dialog>\n    );\n  }\n}\n\nSettings.propTypes = {\n  isStreaming: PropTypes.bool.isRequired,\n  settings: PropTypes.shape({\n    audioInput: PropTypes.string.isRequired,\n    videoInput: PropTypes.string.isRequired,\n  }).isRequired,\n  hide: PropTypes.func.isRequired,\n  save: PropTypes.func.isRequired,\n};\n\nexport default connect(\n  ({\n    user: { settings, stream },\n  }) => ({\n    isStreaming: !!stream,\n    settings,\n  }),\n  {\n    hide,\n    save,\n  }\n)(Settings);\n","import PropTypes from 'prop-types';\nimport React from 'react';\nimport {\n  TiCog,\n  TiVolumeDown,\n  TiVolumeMute,\n  TiEject,\n} from 'react-icons/ti';\nimport { connect } from 'react-redux';\nimport styled from 'styled-components';\nimport { show as showDialog } from '@/actions/dialog';\nimport { signout, toggleAudio } from '@/actions/user';\nimport Video from '@/components/room/video';\nimport API from '@/services/api';\nimport Settings from './settings';\n\nconst Wrapper = styled.div`\n  position: absolute;\n  top: 0;\n  right: 0;\n  background: #000;\n  box-shadow: 0 0 10px rgba(0, 0, 0, .5);\n  overflow: hidden;\n  &, > img, > div > video {\n    width: 100px;\n    height: 100px;\n  }\n  > img {\n    vertical-align: middle;\n  }\n  .actions {\n    display: flex;\n    position: absolute;\n    bottom: -100%;\n    width: 100%;\n    align-items: center;\n    justify-content: space-between;\n    font-size: 2em;\n    color: #eee;\n    transition: bottom ease-out .2s;\n    will-change: bottom;\n    > a {\n      cursor: pointer;\n      &:hover {\n        background: #eee;\n        color: #333;\n      }\n    }\n  }\n  &:hover .actions {\n    bottom: 0;\n  }\n`;\n\nconst User = ({\n  isAudioMuted,\n  isAuth,\n  profile,\n  video,\n  showDialog,\n  signout,\n  toggleAudio,\n}) => (\n  isAuth ? (\n    <div>\n      <Wrapper>\n        {video && video.srcObject.getVideoTracks().length ? (\n          <Video\n            video={video}\n          />\n        ) : (\n          <img\n            src={`${API.baseURL}user/${profile._id}/photo?auth=${API.token}`}\n          />\n        )}\n        <div className=\"actions\">\n          <a onClick={toggleAudio}>\n            {isAudioMuted ? <TiVolumeMute /> : <TiVolumeDown />}\n          </a>\n          <a onClick={() => showDialog('User.Settings')}>\n            <TiCog />\n          </a>\n          <a onClick={signout}>\n            <TiEject />\n          </a>\n        </div>\n      </Wrapper>\n      <Settings />\n    </div>\n  ) : null\n);\n\nUser.propTypes = {\n  isAudioMuted: PropTypes.bool.isRequired,\n  isAuth: PropTypes.bool.isRequired,\n  profile: PropTypes.shape({\n    _id: PropTypes.string,\n  }).isRequired,\n  video: PropTypes.oneOfType([PropTypes.bool, PropTypes.object]).isRequired,\n  showDialog: PropTypes.func.isRequired,\n  signout: PropTypes.func.isRequired,\n  toggleAudio: PropTypes.func.isRequired,\n};\n\nexport default connect(\n  ({\n    user: {\n      isAudioMuted,\n      isAuth,\n      profile,\n      video,\n    },\n  }) => ({\n    isAudioMuted,\n    isAuth,\n    profile,\n    video,\n  }),\n  {\n    showDialog,\n    signout,\n    toggleAudio,\n  }\n)(User);\n","import PropTypes from 'prop-types';\nimport React from 'react';\nimport LoadingBar from 'react-redux-loading-bar';\nimport styled from 'styled-components';\nimport User from './user';\n\nconst Route = styled.div`\n  display: flex;\n  height: 100vh;\n`;\n\nconst loadingBarStyle = {\n  backgroundColor: '#393',\n  zIndex: 1,\n};\n\nconst Layout = ({ children }) => (\n  <div>\n    <LoadingBar style={loadingBarStyle} />\n    <Route>\n      { children }\n    </Route>\n    <User />\n  </div>\n);\n\nLayout.propTypes = {\n  children: PropTypes.node.isRequired,\n};\n\nexport default Layout;\n","import PropTypes from 'prop-types';\nimport React, { PureComponent } from 'react';\nimport { TiSocialGooglePlus } from 'react-icons/ti';\nimport { connect } from 'react-redux';\nimport { Translate } from 'react-redux-i18n';\nimport { refreshSession } from '@/actions/user';\nimport Button from '@/components/ui/button';\nimport API from '@/services/api';\n\nclass Login extends PureComponent {\n  constructor(props) {\n    super(props);\n    this.loginWithGoogle = this.loginWithGoogle.bind(this);\n    this.onMessage = this.onMessage.bind(this);\n  }\n\n  componentWillUnmount() {\n    const { popupWatcher } = this;\n    if (popupWatcher) {\n      window.removeEventListener('message', this.onMessage);\n      clearInterval(popupWatcher);\n      delete this.popupWatcher;\n    }\n  }\n\n  onMessage({ origin, data: { session } }) {\n    const { popupWatcher } = this;\n    const { onSession, refreshSession } = this.props;\n    if (API.baseURL.indexOf(origin) === 0) {\n      window.removeEventListener('message', this.onMessage);\n      clearInterval(popupWatcher);\n      delete this.popupWatcher;\n      if (session) {\n        refreshSession(session);\n        if (onSession) {\n          onSession(session);\n        }\n      }\n    }\n  }\n\n  loginWithGoogle({ screenX, screenY }) {\n    const w = 512;\n    const h = 512;\n    const left = (screenX || (window.screen.width / 2)) - (w / 2);\n    const top = (screenY || (window.screen.height / 2)) - (h / 2);\n    const win = window.open(\n      `${API.baseURL}user/google`,\n      'loginWithGoogle',\n      `width=${w},height=${h},top=${top},left=${left}`\n    );\n    if (this.popupWatcher) {\n      window.removeEventListener('message', this.onMessage);\n      clearInterval(this.popupWatcher);\n    }\n    this.popupWatcher = setInterval(() => {\n      if (!win.window) {\n        clearInterval(this.popupWatcher);\n        delete this.popupWatcher;\n        return;\n      }\n      win.postMessage(true, API.baseURL);\n    }, 100);\n    window.addEventListener('message', this.onMessage, false);\n  }\n\n  render() {\n    const { icon: Icon, label } = this.props;\n    return (\n      <Button\n        type=\"button\"\n        onClick={this.loginWithGoogle}\n      >\n        <Icon />\n        <Translate value={label} />\n      </Button>\n    );\n  }\n}\n\nLogin.defaultProps = {\n  icon: TiSocialGooglePlus,\n  label: 'User.signIn',\n  onSession: undefined,\n};\n\nLogin.propTypes = {\n  icon: PropTypes.func,\n  label: PropTypes.string,\n  onSession: PropTypes.func,\n  refreshSession: PropTypes.func.isRequired,\n};\n\nexport default connect(\n  () => ({}),\n  {\n    refreshSession,\n  }\n)(Login);\n","import PropTypes from 'prop-types';\nimport React from 'react';\nimport styled from 'styled-components';\n\nconst Scroll = styled.div`\n  display: flex;\n  width: 100%;\n  overflow-y: overlay;\n`;\n\nconst Wrapper = styled.div`\n  display: flex;\n  width: 100%;\n  max-width: 1024px;\n  flex-direction: column;\n  background: #fff;\n  margin: 0 auto;\n  box-shadow: 0 0 150px rgba(0, 0, 0, .15);\n`;\n\nconst Page = ({ children, className }) => (\n  <Scroll>\n    <Wrapper className={className}>\n      {children}\n    </Wrapper>\n  </Scroll>\n);\n\nPage.defaultProps = {\n  className: null,\n};\n\nPage.propTypes = {\n  children: PropTypes.oneOfType([\n    PropTypes.element,\n    PropTypes.arrayOf(PropTypes.element),\n  ]).isRequired,\n  className: PropTypes.string,\n};\n\nexport default Page;\n","import PropTypes from 'prop-types';\nimport React, { PureComponent } from 'react';\nimport { TiGroup, TiPlus } from 'react-icons/ti';\nimport { connect } from 'react-redux';\nimport { Translate } from 'react-redux-i18n';\nimport { Link } from 'react-router-dom';\nimport styled from 'styled-components';\nimport Button from '@/components/ui/button';\nimport Login from '@/components/ui/login';\nimport Dialog from '@/components/ui/dialog';\nimport Form from '@/components/ui/form';\nimport Page from '@/components/ui/page';\nimport { hide as hideDialog, show as showDialog } from '@/actions/dialog';\nimport { signup } from '@/actions/org';\nimport { fetchOrgs } from '@/actions/user';\n\nconst Heading = styled.div`\n  display: flex;\n  flex-shrink: 0;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  background: #222;\n  height: 300px;\n  > h2 {\n    color: #fff;\n    font-size: 3em;\n    margin: 0 0 1.5rem;\n  }\n  > p {\n    color: #eee;\n    margin: 0;\n    font-size: 1.5em;\n  }\n`;\n\nconst Grid = styled.div`\n  display: flex;\n  height: 100%;\n  > div, > ul {\n    &:nth-child(1) {\n      width: 60%;\n    }\n    &:nth-child(2) {\n      width: 40%;\n    }\n  }\n`;\n\nconst Orgs = styled.div`\n  background: #eee;\n  > h3 {\n    margin: 0;\n    font-size: 1.5em;\n    color: #666;\n    padding: 1.5rem 1.5rem 1rem;\n    border-bottom: 1px solid #ddd;\n  }\n  > a {\n    display: flex;\n    box-sizing: border-box;\n    width: 100%;\n    align-items: center;\n    justify-content: space-between;\n    font-size: 1.5em;\n    padding: 0.75rem 1.5rem;\n    color: #000;\n    text-decoration: none;\n    transition: color ease-out .15s, background-color ease-out .15s;\n    will-change: color, background-color;\n    &:nth-child(odd) {\n      background: #ddd;\n    }\n    &.full {\n      opacity: 0.5;\n      pointer-events: none;\n    }\n    > strong > img {\n      width: 1.5rem;\n      height: 1.125rem;\n      margin-right: 1rem;\n      vertical-align: middle;\n    }\n    &:hover {\n      color: #eee;\n      background-color: #393;\n    }\n  }\n  > button {\n    margin: 1.5rem auto;\n    > svg {\n      font-size: 2em;\n    }\n  }\n`;\n\nconst Features = styled.ul`\n  margin: 2rem 1rem;\n  text-align: left;\n  > li {\n    padding: 0.5rem 0.5rem;\n    font-size: 1.5em;\n  }\n`;\n\nconst CTA = styled.div`\n  margin-top: auto;\n  padding: 1rem 0 2rem;\n  background: #393;\n  color: #eee;\n  > p {\n    font-size: 1.5em;\n    text-align: center;\n  }\n  > button {\n    margin: 0 auto;\n    font-size: 2em;\n    padding: 1rem 2rem;\n  }\n`;\n\nclass Landing extends PureComponent {\n  constructor(props) {\n    super(props);\n    this.onSubmit = this.onSubmit.bind(this);\n  }\n\n  componentWillMount() {\n    const { fetchOrgs, isAuth } = this.props;\n    if (isAuth) {\n      fetchOrgs();\n    }\n  }\n\n  componentDidUpdate({ isAuth: wasAuth }) {\n    const { isAuth, fetchOrgs } = this.props;\n    if (!wasAuth && isAuth) {\n      fetchOrgs();\n    }\n  }\n\n  componentWillUnmount() {\n    const { hideDialog } = this.props;\n    hideDialog('Org.Signup');\n  }\n\n  onSubmit(e) {\n    const { hideDialog, history, signup } = this.props;\n    const { target: form } = e;\n    e.preventDefault();\n    const name = form.name.value;\n    if (!name) {\n      return;\n    }\n    signup({ name })\n      .then(({ value: slug }) => (\n        history.push(`/${slug}`)\n      ))\n      .catch(() => {})\n      .finally(() => hideDialog('Org.Signup'));\n  }\n\n  render() {\n    const {\n      isAuth,\n      orgs,\n      showDialog,\n    } = this.props;\n    return (\n      <Page>\n        <Heading>\n          <h2>BabelChat</h2>\n          <p>Create your own language exchange service in seconds</p>\n        </Heading>\n        <Grid>\n          <Features>\n            <li>\n              1 to 1 conversations with students\n            </li>\n            <li>\n              Group videochat rooms (up to 8 peers)\n            </li>\n            <li>\n              Whiteboard with drag&drop image sharing\n            </li>\n            <li>\n              Customize it with your own branding\n            </li>\n            <li>\n              Integrate it onto your website\n            </li>\n            <li>\n              Free unlimited rooms/students while in open alpha\n            </li>\n          </Features>\n          <Orgs>\n            <h3>Your orgs</h3>\n            {isAuth ? (\n              orgs.map(({ name, slug }) => (\n                <Link\n                  key={slug}\n                  to={{ pathname: `/${slug}` }}\n                >\n                  {name}\n                </Link>\n              ))\n            ) : (\n              <Login />\n            )}\n          </Orgs>\n        </Grid>\n        <CTA>\n          <p>\n            <Translate value=\"Org.CTA.copy\" />\n          </p>\n          {isAuth ? (\n            <Button\n              type=\"button\"\n              onClick={() => showDialog('Org.Signup')}\n            >\n              <TiGroup />\n              <Translate value=\"Org.CTA.button\" />\n            </Button>\n          ) : (\n            <Login\n              icon={TiGroup}\n              label=\"Org.CTA.button\"\n              onSession={() => showDialog('Org.Signup')}\n            />\n          )}\n        </CTA>\n        <Dialog\n          id=\"Org.Signup\"\n        >\n          <Form onSubmit={this.onSubmit}>\n            <div>\n              <label><Translate value=\"Org.Signup.name\" /></label>\n              <input type=\"text\" name=\"name\" />\n            </div>\n            <div className=\"submit\">\n              <Button\n                type=\"submit\"\n              >\n                <TiPlus />\n                <Translate value=\"Org.Signup.submit\" />\n              </Button>\n            </div>\n          </Form>\n        </Dialog>\n      </Page>\n    );\n  }\n}\n\nLanding.propTypes = {\n  /* eslint-disable react/forbid-prop-types */\n  history: PropTypes.object.isRequired,\n  /* eslint-enable react/forbid-prop-types */\n  isAuth: PropTypes.bool.isRequired,\n  orgs: PropTypes.arrayOf(PropTypes.shape({\n    name: PropTypes.string.isRequired,\n    slug: PropTypes.string.isRequired,\n  })).isRequired,\n  fetchOrgs: PropTypes.func.isRequired,\n  hideDialog: PropTypes.func.isRequired,\n  showDialog: PropTypes.func.isRequired,\n  signup: PropTypes.func.isRequired,\n};\n\nexport default connect(\n  ({\n    user: { isAuth, orgs },\n  }) => ({ isAuth, orgs }),\n  {\n    fetchOrgs,\n    hideDialog,\n    showDialog,\n    signup,\n  }\n)(Landing);\n","import API from '@/services/api';\nimport * as types from './types';\n\nexport function createRoom({\n  flag,\n  name,\n  peerLimit,\n  type,\n  users,\n}) {\n  return (dispatch, getState) => {\n    const { org: { id } } = getState();\n    return dispatch({\n      type: types.ORG_CREATE_ROOM,\n      payload: API.fetch({\n        body: {\n          flag,\n          name,\n          peerLimit,\n          type,\n          users,\n        },\n        endpoint: `org/${id}/rooms`,\n        method: 'PUT',\n      }),\n    });\n  };\n}\n\nexport function fetch(slug) {\n  return {\n    type: types.ORG_FETCH,\n    payload: API.fetch({\n      endpoint: `org/${slug}`,\n    }),\n  };\n}\n\nexport function fetchRooms() {\n  return (dispatch, getState) => {\n    const { org: { id } } = getState();\n    return dispatch({\n      type: types.ORG_FETCH_ROOMS,\n      payload: API.fetch({\n        endpoint: `org/${id}/rooms`,\n      }),\n    });\n  };\n}\n\nexport function fetchUsers() {\n  return (dispatch, getState) => {\n    const { org: { id } } = getState();\n    return dispatch({\n      type: types.ORG_FETCH_USERS,\n      payload: API.fetch({\n        endpoint: `org/${id}/users`,\n      }),\n    });\n  };\n}\n\nexport function remove() {\n  return (dispatch, getState) => {\n    const { org: { id } } = getState();\n    return dispatch({\n      type: types.ORG_REMOVE,\n      payload: API.fetch({\n        endpoint: `org/${id}`,\n        method: 'DELETE',\n      }),\n    });\n  };\n}\n\nexport function removeRoom(slug) {\n  return (dispatch, getState) => {\n    const { org: { id } } = getState();\n    return dispatch({\n      type: types.ORG_REMOVE_ROOM,\n      payload: API.fetch({\n        endpoint: `org/${id}/room/${slug}`,\n        method: 'DELETE',\n      })\n        .then(() => ({ slug })),\n    });\n  };\n}\n\nexport function removeUser(user) {\n  return (dispatch, getState) => {\n    const { org: { id } } = getState();\n    return dispatch({\n      type: types.ORG_REMOVE_USER,\n      payload: API.fetch({\n        endpoint: `org/${id}/user/${user}`,\n        method: 'DELETE',\n      })\n        .then(() => ({ user })),\n    });\n  };\n}\n\nexport function resolveRequest({ user, resolution }) {\n  return (dispatch, getState) => {\n    const { org: { id } } = getState();\n    return dispatch({\n      type: types.ORG_RESOLVE_REQUEST,\n      payload: API.fetch({\n        endpoint: `org/${id}/user/${user}/${resolution}`,\n        method: 'POST',\n      })\n        .then(() => ({\n          user,\n          resolution,\n        })),\n    });\n  };\n}\n\nexport function requestAccess() {\n  return (dispatch, getState) => {\n    const { org: { id } } = getState();\n    return dispatch({\n      type: types.ORG_REQUEST_ACCESS,\n      payload: API.fetch({\n        endpoint: `org/${id}/users`,\n        method: 'PUT',\n      }),\n    });\n  };\n}\n\nexport function reset() {\n  return {\n    type: types.ORG_RESET,\n  };\n}\n\nexport function signup({ name }) {\n  return {\n    type: types.ORG_SIGNUP,\n    payload: API.fetch({\n      body: {\n        name,\n      },\n      endpoint: 'orgs',\n      method: 'PUT',\n    }),\n  };\n}\n\nexport function update({ name }) {\n  return (dispatch, getState) => {\n    const { org: { id } } = getState();\n    return dispatch({\n      type: types.ORG_UPDATE,\n      payload: API.fetch({\n        body: { name },\n        endpoint: `org/${id}`,\n        method: 'POST',\n      }),\n    });\n  };\n}\n\nexport function updateImage({ image, blob }) {\n  return (dispatch, getState) => {\n    const { org: { id } } = getState();\n    const body = new FormData();\n    body.append('image', blob);\n    return dispatch({\n      type: types.ORG_UPDATE_IMAGE,\n      payload: API.fetch({\n        body,\n        endpoint: `org/${id}/${image}`,\n        method: 'POST',\n      }),\n    });\n  };\n}\n","import React from 'react';\nimport { TiArrowBack } from 'react-icons/ti';\nimport { Translate } from 'react-redux-i18n';\nimport { Link } from 'react-router-dom';\nimport styled from 'styled-components';\nimport Button from '@/components/ui/button';\n\nconst Wrapper = styled.div`\n  display: flex;\n  width: 100%;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n`;\n\nconst Status = styled.div`\n  font-size: 6em;\n  line-height: 0.8em;\n  color: #656565;\n  margin-bottom: 2rem;\n`;\n\nconst Description = styled.div`\n  font-size: 1.5em;\n`;\n\nconst Alternative = styled.div`\n  margin: 2rem 0 4rem;\n  > a {\n    text-decoration: none;\n    font-size: 1.2em;\n  }\n`;\n\nconst NotFound = () => (\n  <Wrapper>\n    <Status>\n      404\n    </Status>\n    <Description>\n      <Translate value=\"NotFound.description\" />\n    </Description>\n    <Alternative>\n      <Link to={{ pathname: '/' }}>\n        <Button\n          type=\"button\"\n          primary\n        >\n          <TiArrowBack />\n          <Translate value=\"NotFound.goBack\" />\n        </Button>\n      </Link>\n    </Alternative>\n  </Wrapper>\n);\n\nexport default NotFound;\n","import styled from 'styled-components';\n\nexport default styled.div`\n  box-sizing: border-box;\n  display: flex;\n  margin: -1rem;\n  margin-bottom: 1rem;\n  background-color: #111;\n  color: #eee;\n  height: 2.5rem;\n  > div {\n    display: flex;\n    align-items: center;\n    font-weight: 700;\n    padding: 0 1rem;\n    height: 100%;\n    cursor: pointer;\n    transition: background-color ease-out .2s;\n    will-change: background-color, color;\n    border-right: 1px solid #222;\n    &:hover {\n      background-color: #333;\n    }\n    &.active {\n      background-color: #eee;\n      color: #353535;\n      cursor: default;\n    }\n  }\n`;\n","export default [\n  {\n    name: 'Afghanistan',\n    code: 'af',\n  },\n  {\n    name: 'land Islands',\n    code: 'ax',\n  },\n  {\n    name: 'Albania',\n    code: 'al',\n  },\n  {\n    name: 'Algeria',\n    code: 'dz',\n  },\n  {\n    name: 'American Samoa',\n    code: 'as',\n  },\n  {\n    name: 'Andorra',\n    code: 'ad',\n  },\n  {\n    name: 'Angola',\n    code: 'ao',\n  },\n  {\n    name: 'Anguilla',\n    code: 'ai',\n  },\n  {\n    name: 'Antarctica',\n    code: 'aq',\n  },\n  {\n    name: 'Antigua and Barbuda',\n    code: 'ag',\n  },\n  {\n    name: 'Argentina',\n    code: 'ar',\n  },\n  {\n    name: 'Armenia',\n    code: 'am',\n  },\n  {\n    name: 'Aruba',\n    code: 'aw',\n  },\n  {\n    name: 'Australia',\n    code: 'au',\n  },\n  {\n    name: 'Austria',\n    code: 'at',\n  },\n  {\n    name: 'Azerbaijan',\n    code: 'az',\n  },\n  {\n    name: 'Bahamas',\n    code: 'bs',\n  },\n  {\n    name: 'Bahrain',\n    code: 'bh',\n  },\n  {\n    name: 'Bangladesh',\n    code: 'bd',\n  },\n  {\n    name: 'Barbados',\n    code: 'bb',\n  },\n  {\n    name: 'Belarus',\n    code: 'by',\n  },\n  {\n    name: 'Belgium',\n    code: 'be',\n  },\n  {\n    name: 'Belize',\n    code: 'bz',\n  },\n  {\n    name: 'Benin',\n    code: 'bj',\n  },\n  {\n    name: 'Bermuda',\n    code: 'bm',\n  },\n  {\n    name: 'Bhutan',\n    code: 'bt',\n  },\n  {\n    name: 'Bolivia, Plurinational State of',\n    code: 'bo',\n  },\n  {\n    name: 'Bonaire, Sint Eustatius and Saba',\n    code: 'bq',\n  },\n  {\n    name: 'Bosnia and Herzegovina',\n    code: 'ba',\n  },\n  {\n    name: 'Botswana',\n    code: 'bw',\n  },\n  {\n    name: 'Bouvet Island',\n    code: 'bv',\n  },\n  {\n    name: 'Brazil',\n    code: 'br',\n  },\n  {\n    name: 'British Indian Ocean Territory',\n    code: 'io',\n  },\n  {\n    name: 'Brunei Darussalam',\n    code: 'bn',\n  },\n  {\n    name: 'Bulgaria',\n    code: 'bg',\n  },\n  {\n    name: 'Burkina Faso',\n    code: 'bf',\n  },\n  {\n    name: 'Burundi',\n    code: 'bi',\n  },\n  {\n    name: 'Cambodia',\n    code: 'kh',\n  },\n  {\n    name: 'Cameroon',\n    code: 'cm',\n  },\n  {\n    name: 'Canada',\n    code: 'ca',\n  },\n  {\n    name: 'Cape Verde',\n    code: 'cv',\n  },\n  {\n    name: 'Catalonia',\n    code: 'es-ct',\n  },\n  {\n    name: 'Cayman Islands',\n    code: 'ky',\n  },\n  {\n    name: 'Central African Republic',\n    code: 'cf',\n  },\n  {\n    name: 'Chad',\n    code: 'td',\n  },\n  {\n    name: 'Chile',\n    code: 'cl',\n  },\n  {\n    name: 'China',\n    code: 'cn',\n  },\n  {\n    name: 'Christmas Island',\n    code: 'cx',\n  },\n  {\n    name: 'Cocos (Keeling) Islands',\n    code: 'cc',\n  },\n  {\n    name: 'Colombia',\n    code: 'co',\n  },\n  {\n    name: 'Comoros',\n    code: 'km',\n  },\n  {\n    name: 'Congo',\n    code: 'cg',\n  },\n  {\n    name: 'Congo, the Democratic Republic of the',\n    code: 'cd',\n  },\n  {\n    name: 'Cook Islands',\n    code: 'ck',\n  },\n  {\n    name: 'Costa Rica',\n    code: 'cr',\n  },\n  {\n    name: \"Cte d'Ivoire\",\n    code: 'ci',\n  },\n  {\n    name: 'Croatia',\n    code: 'hr',\n  },\n  {\n    name: 'Cuba',\n    code: 'cu',\n  },\n  {\n    name: 'Curaao',\n    code: 'cw',\n  },\n  {\n    name: 'Cyprus',\n    code: 'cy',\n  },\n  {\n    name: 'Czech Republic',\n    code: 'cz',\n  },\n  {\n    name: 'Denmark',\n    code: 'dk',\n  },\n  {\n    name: 'Djibouti',\n    code: 'dj',\n  },\n  {\n    name: 'Dominica',\n    code: 'dm',\n  },\n  {\n    name: 'Dominican Republic',\n    code: 'do',\n  },\n  {\n    name: 'Ecuador',\n    code: 'ec',\n  },\n  {\n    name: 'Egypt',\n    code: 'eg',\n  },\n  {\n    name: 'El Salvador',\n    code: 'sv',\n  },\n  {\n    name: 'Equatorial Guinea',\n    code: 'gq',\n  },\n  {\n    name: 'Eritrea',\n    code: 'er',\n  },\n  {\n    name: 'Estonia',\n    code: 'ee',\n  },\n  {\n    name: 'Ethiopia',\n    code: 'et',\n  },\n  {\n    name: 'European Union',\n    code: 'eu',\n  },\n  {\n    name: 'Falkland Islands (Malvinas)',\n    code: 'fk',\n  },\n  {\n    name: 'Faroe Islands',\n    code: 'fo',\n  },\n  {\n    name: 'Fiji',\n    code: 'fj',\n  },\n  {\n    name: 'Finland',\n    code: 'fi',\n  },\n  {\n    name: 'France',\n    code: 'fr',\n  },\n  {\n    name: 'French Guiana',\n    code: 'gf',\n  },\n  {\n    name: 'French Polynesia',\n    code: 'pf',\n  },\n  {\n    name: 'French Southern Territories',\n    code: 'tf',\n  },\n  {\n    name: 'Gabon',\n    code: 'ga',\n  },\n  {\n    name: 'Gambia',\n    code: 'gm',\n  },\n  {\n    name: 'Georgia',\n    code: 'ge',\n  },\n  {\n    name: 'Germany',\n    code: 'de',\n  },\n  {\n    name: 'Ghana',\n    code: 'gh',\n  },\n  {\n    name: 'Gibraltar',\n    code: 'gi',\n  },\n  {\n    name: 'Greece',\n    code: 'gr',\n  },\n  {\n    name: 'Greenland',\n    code: 'gl',\n  },\n  {\n    name: 'Grenada',\n    code: 'gd',\n  },\n  {\n    name: 'Guadeloupe',\n    code: 'gp',\n  },\n  {\n    name: 'Guam',\n    code: 'gu',\n  },\n  {\n    name: 'Guatemala',\n    code: 'gt',\n  },\n  {\n    name: 'Guernsey',\n    code: 'gg',\n  },\n  {\n    name: 'Guinea',\n    code: 'gn',\n  },\n  {\n    name: 'Guinea-Bissau',\n    code: 'gw',\n  },\n  {\n    name: 'Guyana',\n    code: 'gy',\n  },\n  {\n    name: 'Haiti',\n    code: 'ht',\n  },\n  {\n    name: 'Heard Island and McDonald Islands',\n    code: 'hm',\n  },\n  {\n    name: 'Holy See (Vatican City State)',\n    code: 'va',\n  },\n  {\n    name: 'Honduras',\n    code: 'hn',\n  },\n  {\n    name: 'Hong Kong',\n    code: 'hk',\n  },\n  {\n    name: 'Hungary',\n    code: 'hu',\n  },\n  {\n    name: 'Iceland',\n    code: 'is',\n  },\n  {\n    name: 'India',\n    code: 'in',\n  },\n  {\n    name: 'Indonesia',\n    code: 'id',\n  },\n  {\n    name: 'Iran, Islamic Republic of',\n    code: 'ir',\n  },\n  {\n    name: 'Iraq',\n    code: 'iq',\n  },\n  {\n    name: 'Ireland',\n    code: 'ie',\n  },\n  {\n    name: 'Isle of Man',\n    code: 'im',\n  },\n  {\n    name: 'Israel',\n    code: 'il',\n  },\n  {\n    name: 'Italy',\n    code: 'it',\n  },\n  {\n    name: 'Jamaica',\n    code: 'jm',\n  },\n  {\n    name: 'Japan',\n    code: 'jp',\n  },\n  {\n    name: 'Jersey',\n    code: 'je',\n  },\n  {\n    name: 'Jordan',\n    code: 'jo',\n  },\n  {\n    name: 'Kazakhstan',\n    code: 'kz',\n  },\n  {\n    name: 'Kenya',\n    code: 'ke',\n  },\n  {\n    name: 'Kiribati',\n    code: 'ki',\n  },\n  {\n    name: \"Korea, Democratic People's Republic of\",\n    code: 'kp',\n  },\n  {\n    name: 'Korea, Republic of',\n    code: 'kr',\n  },\n  {\n    name: 'Kuwait',\n    code: 'kw',\n  },\n  {\n    name: 'Kyrgyzstan',\n    code: 'kg',\n  },\n  {\n    name: \"Lao People's Democratic Republic\",\n    code: 'la',\n  },\n  {\n    name: 'Latvia',\n    code: 'lv',\n  },\n  {\n    name: 'Lebanon',\n    code: 'lb',\n  },\n  {\n    name: 'Lesotho',\n    code: 'ls',\n  },\n  {\n    name: 'Liberia',\n    code: 'lr',\n  },\n  {\n    name: 'Libya',\n    code: 'ly',\n  },\n  {\n    name: 'Liechtenstein',\n    code: 'li',\n  },\n  {\n    name: 'Lithuania',\n    code: 'lt',\n  },\n  {\n    name: 'Luxembourg',\n    code: 'lu',\n  },\n  {\n    name: 'Macao',\n    code: 'mo',\n  },\n  {\n    name: 'Macedonia, the Former Yugoslav Republic of',\n    code: 'mk',\n  },\n  {\n    name: 'Madagascar',\n    code: 'mg',\n  },\n  {\n    name: 'Malawi',\n    code: 'mw',\n  },\n  {\n    name: 'Malaysia',\n    code: 'my',\n  },\n  {\n    name: 'Maldives',\n    code: 'mv',\n  },\n  {\n    name: 'Mali',\n    code: 'ml',\n  },\n  {\n    name: 'Malta',\n    code: 'mt',\n  },\n  {\n    name: 'Marshall Islands',\n    code: 'mh',\n  },\n  {\n    name: 'Martinique',\n    code: 'mq',\n  },\n  {\n    name: 'Mauritania',\n    code: 'mr',\n  },\n  {\n    name: 'Mauritius',\n    code: 'mu',\n  },\n  {\n    name: 'Mayotte',\n    code: 'yt',\n  },\n  {\n    name: 'Mexico',\n    code: 'mx',\n  },\n  {\n    name: 'Micronesia, Federated States of',\n    code: 'fm',\n  },\n  {\n    name: 'Moldova, Republic of',\n    code: 'md',\n  },\n  {\n    name: 'Monaco',\n    code: 'mc',\n  },\n  {\n    name: 'Mongolia',\n    code: 'mn',\n  },\n  {\n    name: 'Montenegro',\n    code: 'me',\n  },\n  {\n    name: 'Montserrat',\n    code: 'ms',\n  },\n  {\n    name: 'Morocco',\n    code: 'ma',\n  },\n  {\n    name: 'Mozambique',\n    code: 'mz',\n  },\n  {\n    name: 'Myanmar',\n    code: 'mm',\n  },\n  {\n    name: 'Namibia',\n    code: 'na',\n  },\n  {\n    name: 'Nauru',\n    code: 'nr',\n  },\n  {\n    name: 'Nepal',\n    code: 'np',\n  },\n  {\n    name: 'Netherlands',\n    code: 'nl',\n  },\n  {\n    name: 'New Caledonia',\n    code: 'nc',\n  },\n  {\n    name: 'New Zealand',\n    code: 'nz',\n  },\n  {\n    name: 'Nicaragua',\n    code: 'ni',\n  },\n  {\n    name: 'Niger',\n    code: 'ne',\n  },\n  {\n    name: 'Nigeria',\n    code: 'ng',\n  },\n  {\n    name: 'Niue',\n    code: 'nu',\n  },\n  {\n    name: 'Norfolk Island',\n    code: 'nf',\n  },\n  {\n    name: 'Northern Mariana Islands',\n    code: 'mp',\n  },\n  {\n    name: 'Norway',\n    code: 'no',\n  },\n  {\n    name: 'Oman',\n    code: 'om',\n  },\n  {\n    name: 'Pakistan',\n    code: 'pk',\n  },\n  {\n    name: 'Palau',\n    code: 'pw',\n  },\n  {\n    name: 'Palestine, State of',\n    code: 'ps',\n  },\n  {\n    name: 'Panama',\n    code: 'pa',\n  },\n  {\n    name: 'Papua New Guinea',\n    code: 'pg',\n  },\n  {\n    name: 'Paraguay',\n    code: 'py',\n  },\n  {\n    name: 'Peru',\n    code: 'pe',\n  },\n  {\n    name: 'Philippines',\n    code: 'ph',\n  },\n  {\n    name: 'Pitcairn',\n    code: 'pn',\n  },\n  {\n    name: 'Poland',\n    code: 'pl',\n  },\n  {\n    name: 'Portugal',\n    code: 'pt',\n  },\n  {\n    name: 'Puerto Rico',\n    code: 'pr',\n  },\n  {\n    name: 'Qatar',\n    code: 'qa',\n  },\n  {\n    name: 'Runion',\n    code: 're',\n  },\n  {\n    name: 'Romania',\n    code: 'ro',\n  },\n  {\n    name: 'Russian Federation',\n    code: 'ru',\n  },\n  {\n    name: 'Rwanda',\n    code: 'rw',\n  },\n  {\n    name: 'Saint Barthlemy',\n    code: 'bl',\n  },\n  {\n    name: 'Saint Helena, Ascension and Tristan da Cunha',\n    code: 'sh',\n  },\n  {\n    name: 'Saint Kitts and Nevis',\n    code: 'kn',\n  },\n  {\n    name: 'Saint Lucia',\n    code: 'lc',\n  },\n  {\n    name: 'Saint Martin (French part)',\n    code: 'mf',\n  },\n  {\n    name: 'Saint Pierre and Miquelon',\n    code: 'pm',\n  },\n  {\n    name: 'Saint Vincent and the Grenadines',\n    code: 'vc',\n  },\n  {\n    name: 'Samoa',\n    code: 'ws',\n  },\n  {\n    name: 'San Marino',\n    code: 'sm',\n  },\n  {\n    name: 'Sao Tome and Principe',\n    code: 'st',\n  },\n  {\n    name: 'Saudi Arabia',\n    code: 'sa',\n  },\n  {\n    name: 'Senegal',\n    code: 'sn',\n  },\n  {\n    name: 'Serbia',\n    code: 'rs',\n  },\n  {\n    name: 'Seychelles',\n    code: 'sc',\n  },\n  {\n    name: 'Sierra Leone',\n    code: 'sl',\n  },\n  {\n    name: 'Singapore',\n    code: 'sg',\n  },\n  {\n    name: 'Sint Maarten (Dutch part)',\n    code: 'sx',\n  },\n  {\n    name: 'Slovakia',\n    code: 'sk',\n  },\n  {\n    name: 'Slovenia',\n    code: 'si',\n  },\n  {\n    name: 'Solomon Islands',\n    code: 'sb',\n  },\n  {\n    name: 'Somalia',\n    code: 'so',\n  },\n  {\n    name: 'South Africa',\n    code: 'za',\n  },\n  {\n    name: 'South Georgia and the South Sandwich Islands',\n    code: 'gs',\n  },\n  {\n    name: 'South Sudan',\n    code: 'ss',\n  },\n  {\n    name: 'Spain',\n    code: 'es',\n  },\n  {\n    name: 'Sri Lanka',\n    code: 'lk',\n  },\n  {\n    name: 'Sudan',\n    code: 'sd',\n  },\n  {\n    name: 'Suriname',\n    code: 'sr',\n  },\n  {\n    name: 'Svalbard and Jan Mayen',\n    code: 'sj',\n  },\n  {\n    name: 'Swaziland',\n    code: 'sz',\n  },\n  {\n    name: 'Sweden',\n    code: 'se',\n  },\n  {\n    name: 'Switzerland',\n    code: 'ch',\n  },\n  {\n    name: 'Syrian Arab Republic',\n    code: 'sy',\n  },\n  {\n    name: 'Taiwan, Province of China',\n    code: 'tw',\n  },\n  {\n    name: 'Tajikistan',\n    code: 'tj',\n  },\n  {\n    name: 'Tanzania, United Republic of',\n    code: 'tz',\n  },\n  {\n    name: 'Thailand',\n    code: 'th',\n  },\n  {\n    name: 'Timor-Leste',\n    code: 'tl',\n  },\n  {\n    name: 'Togo',\n    code: 'tg',\n  },\n  {\n    name: 'Tokelau',\n    code: 'tk',\n  },\n  {\n    name: 'Tonga',\n    code: 'to',\n  },\n  {\n    name: 'Trinidad and Tobago',\n    code: 'tt',\n  },\n  {\n    name: 'Tunisia',\n    code: 'tn',\n  },\n  {\n    name: 'Turkey',\n    code: 'tr',\n  },\n  {\n    name: 'Turkmenistan',\n    code: 'tm',\n  },\n  {\n    name: 'Turks and Caicos Islands',\n    code: 'tc',\n  },\n  {\n    name: 'Tuvalu',\n    code: 'tv',\n  },\n  {\n    name: 'Uganda',\n    code: 'ug',\n  },\n  {\n    name: 'Ukraine',\n    code: 'ua',\n  },\n  {\n    name: 'United Arab Emirates',\n    code: 'ae',\n  },\n  {\n    name: 'United Kingdom',\n    code: 'gb',\n  },\n  {\n    name: 'England',\n    code: 'gb-eng',\n  },\n  {\n    name: 'Northern Ireland',\n    code: 'gb-nir',\n  },\n  {\n    name: 'Scotland',\n    code: 'gb-sct',\n  },\n  {\n    name: 'Wales',\n    code: 'gb-wls',\n  },\n  {\n    name: 'United Nations',\n    code: 'un',\n  },\n  {\n    name: 'United States',\n    code: 'us',\n  },\n  {\n    name: 'United States Minor Outlying Islands',\n    code: 'um',\n  },\n  {\n    name: 'Uruguay',\n    code: 'uy',\n  },\n  {\n    name: 'Uzbekistan',\n    code: 'uz',\n  },\n  {\n    name: 'Vanuatu',\n    code: 'vu',\n  },\n  {\n    name: 'Venezuela, Bolivarian Republic of',\n    code: 've',\n  },\n  {\n    name: 'Viet Nam',\n    code: 'vn',\n  },\n  {\n    name: 'Virgin Islands, British',\n    code: 'vg',\n  },\n  {\n    name: 'Virgin Islands, U.S.',\n    code: 'vi',\n  },\n  {\n    name: 'Wallis and Futuna',\n    code: 'wf',\n  },\n  {\n    name: 'Western Sahara',\n    code: 'eh',\n  },\n  {\n    name: 'Yemen',\n    code: 'ye',\n  },\n  {\n    name: 'Zambia',\n    code: 'zm',\n  },\n  {\n    name: 'Zimbabwe',\n    code: 'zw',\n  },\n];\n","import PropTypes from 'prop-types';\nimport React, { PureComponent } from 'react';\nimport { TiPlus } from 'react-icons/ti';\nimport { connect } from 'react-redux';\nimport { Translate } from 'react-redux-i18n';\nimport styled from 'styled-components';\nimport { hide } from '@/actions/dialog';\nimport { createRoom } from '@/actions/org';\nimport Button from '@/components/ui/button';\nimport Dialog from '@/components/ui/dialog';\nimport Form from '@/components/ui/form';\nimport Tabs from '@/components/ui/tabs';\nimport Countries from '@/locales/countries';\nimport API from '@/services/api';\n\nconst Users = styled.div`\n  height: 200px;\n  overflow-y: scroll;\n  border: 1px solid #ccc;\n  > label {\n    display: flex;\n    align-items: center;\n    padding: 0.5rem 0;\n    border-bottom: 1px solid #bbb;\n    > input {\n      margin: 0 0.5rem;\n      width: 1rem;\n      height: 1rem;\n    }\n    > img {\n      width: 32px;\n      height: 32px;\n      border-radius: 16px;\n      margin-right: 0.5rem;\n      vertical-align: middle;\n    }\n  }\n`;\n\nclass CreateRoom extends PureComponent {\n  constructor(props) {\n    super(props);\n    this.onSubmit = this.onSubmit.bind(this);\n    this.state = { type: 'public' };\n  }\n\n  onSubmit(e) {\n    const { users, hide, createRoom } = this.props;\n    const { type } = this.state;\n    const { target: form } = e;\n    e.preventDefault();\n    const payload = {\n      type,\n      flag: form.flag.value,\n      name: form.name.value,\n    };\n    if (!payload.flag || !payload.name) {\n      return;\n    }\n    switch (type) {\n      case 'public':\n        payload.peerLimit = parseInt(form.peerLimit.value, 10);\n        if (!payload.peerLimit) {\n          return;\n        }\n        break;\n      case 'private':\n        payload.users = users.reduce((users, { _id }) => ([\n          ...users,\n          ...(form[`user::${_id}`].checked ? [_id] : []),\n        ]), []);\n        if (!payload.users.length) {\n          return;\n        }\n        break;\n      default:\n        break;\n    }\n    createRoom(payload)\n      .then(() => hide('Org.CreateRoom'));\n  }\n\n  render() {\n    const { users } = this.props;\n    const { type } = this.state;\n    return (\n      <Dialog\n        id=\"Org.CreateRoom\"\n      >\n        <Tabs>\n          <div\n            className={type === 'public' ? 'active' : ''}\n            onClick={() => this.setState({ type: 'public' })}\n          >\n            <Translate value=\"Org.CreateRoom.publicRoom\" />\n          </div>\n          <div\n            className={type === 'private' ? 'active' : ''}\n            onClick={() => this.setState({ type: 'private' })}\n          >\n            <Translate value=\"Org.CreateRoom.inviteOnly\" />\n          </div>\n        </Tabs>\n        <Form onSubmit={this.onSubmit}>\n          <div>\n            <label>\n              <Translate value=\"Org.CreateRoom.flag\" />\n            </label>\n            <select name=\"flag\" defaultValue=\"gb\" required>\n              {Countries.map(({ code, name }) => (\n                <option\n                  key={code}\n                  value={code}\n                >\n                  {name}\n                </option>\n              ))}\n            </select>\n          </div>\n          <div>\n            <label>\n              <Translate value=\"Org.CreateRoom.name\" />\n            </label>\n            <input\n              type=\"text\"\n              name=\"name\"\n              required\n              autoFocus\n            />\n          </div>\n          {type === 'public' ? (\n            <div>\n              <label>\n                <Translate value=\"Org.CreateRoom.peerLimit\" />\n              </label>\n              <input\n                type=\"number\"\n                name=\"peerLimit\"\n                min=\"2\"\n                max=\"8\"\n                defaultValue=\"4\"\n                required\n              />\n            </div>\n          ) : null}\n          {type === 'private' ? (\n            <div>\n              <label>\n                <Translate value=\"Org.CreateRoom.users\" />\n              </label>\n              <Users>\n                {(\n                  users\n                    .filter(({ isRequest }) => (!isRequest))\n                    .map(({\n                      _id,\n                      name,\n                    }) => (\n                      <label key={_id}>\n                        <input\n                          type=\"checkbox\"\n                          name={`user::${_id}`}\n                        />\n                        <img\n                          src={`${API.baseURL}user/${_id}/photo?auth=${API.token}`}\n                        />\n                        {name}\n                      </label>\n                    ))\n                )}\n              </Users>\n            </div>\n          ) : null}\n          <div className=\"submit\">\n            <Button\n              type=\"submit\"\n            >\n              <TiPlus />\n              <Translate value=\"Org.CreateRoom.submit\" />\n            </Button>\n          </div>\n        </Form>\n      </Dialog>\n    );\n  }\n}\n\nCreateRoom.propTypes = {\n  users: PropTypes.arrayOf(PropTypes.shape({\n    _id: PropTypes.string.isRequired,\n    isRequest: PropTypes.bool,\n    name: PropTypes.string.isRequired,\n  })).isRequired,\n  createRoom: PropTypes.func.isRequired,\n  hide: PropTypes.func.isRequired,\n};\n\nexport default connect(\n  ({ org: { users } }) => ({ users }),\n  {\n    createRoom,\n    hide,\n  }\n)(CreateRoom);\n","import PropTypes from 'prop-types';\nimport React, { PureComponent } from 'react';\nimport { TiTrash } from 'react-icons/ti';\nimport { connect } from 'react-redux';\nimport { Translate } from 'react-redux-i18n';\nimport { Link } from 'react-router-dom';\nimport styled from 'styled-components';\nimport { fetchRooms as fetch, removeRoom } from '@/actions/org';\n\nconst Listing = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  > a {\n    display: flex;\n    box-sizing: border-box;\n    width: 100%;\n    align-items: center;\n    justify-content: space-between;\n    font-size: 1.5em;\n    padding: 1rem;\n    color: #000;\n    text-decoration: none;\n    transition: color ease-out .15s, background-color ease-out .15s;\n    will-change: color, background-color;\n    &:nth-child(even) {\n      background: #ddd;\n    }\n    &.full {\n      opacity: 0.5;\n      pointer-events: none;\n    }\n    > strong > img {\n      width: 1.5rem;\n      height: 1.125rem;\n      margin-right: 1rem;\n      vertical-align: middle;\n    }\n    &:hover {\n      color: #eee;\n      background-color: #393;\n    }\n  }\n  &.admin > a {\n    > svg {\n      display: none;\n    }\n    &:hover {\n      > span {\n        display: none;\n      }\n      > svg {\n        display: block;\n      }\n    }\n  }\n`;\n\nclass Rooms extends PureComponent {\n  componentDidMount() {\n    const { fetch } = this.props;\n    fetch();\n  }\n\n  onRemove(e, slug) {\n    const { removeRoom } = this.props;\n    e.preventDefault();\n    removeRoom(slug);\n  }\n\n  render() {\n    const { isAdmin, list, org } = this.props;\n    return (\n      <Listing className={isAdmin ? 'admin' : null}>\n        {list.map(({\n          flag,\n          name,\n          peerLimit,\n          peers,\n          slug,\n        }) => (\n          <Link\n            key={slug}\n            to={{ pathname: `/${org}/${slug}` }}\n            className={peers >= peerLimit ? 'full' : ''}\n          >\n            <strong>\n              <img\n                src={`${__COUNTRY_FLAGS_CDN__}${flag}.svg`}\n              />\n              {name}\n            </strong>\n            <Translate\n              count={peers}\n              limit={peerLimit}\n              value=\"Rooms.peers\"\n            />\n            {isAdmin ? (\n              <TiTrash\n                onClick={e => this.onRemove(e, slug)}\n              />\n            ) : null}\n          </Link>\n        ))}\n      </Listing>\n    );\n  }\n}\n\nRooms.propTypes = {\n  isAdmin: PropTypes.bool.isRequired,\n  list: PropTypes.arrayOf(PropTypes.shape({\n    flag: PropTypes.string.isRequired,\n    name: PropTypes.string.isRequired,\n    peerLimit: PropTypes.number.isRequired,\n    peers: PropTypes.number.isRequired,\n    slug: PropTypes.string.isRequired,\n  })).isRequired,\n  org: PropTypes.string.isRequired,\n  fetch: PropTypes.func.isRequired,\n  removeRoom: PropTypes.func.isRequired,\n};\n\nexport default connect(\n  ({\n    org: {\n      isAdmin,\n      rooms: list,\n    },\n  }) => ({\n    isAdmin,\n    list,\n  }),\n  {\n    fetch,\n    removeRoom,\n  }\n)(Rooms);\n","import PropTypes from 'prop-types';\nimport React, { PureComponent } from 'react';\nimport { TiTick, TiTimes } from 'react-icons/ti';\nimport { connect } from 'react-redux';\nimport { Translate } from 'react-redux-i18n';\nimport { withRouter } from 'react-router';\nimport styled from 'styled-components';\nimport { hide } from '@/actions/dialog';\nimport { remove, update } from '@/actions/org';\nimport Button from '@/components/ui/button';\nimport Dialog from '@/components/ui/dialog';\nimport Form from '@/components/ui/form';\nimport Tabs from '@/components/ui/tabs';\n\nconst DangerZone = styled(Form)`\n  background: #933;\n  border-radius: 2px;\n  padding: 2.188rem 0;\n  > div > button {\n    margin-top: 0;\n    background: #933;\n  }\n`;\n\nclass Settings extends PureComponent {\n  constructor(props) {\n    super(props);\n    this.onRemove = this.onRemove.bind(this);\n    this.onSubmit = this.onSubmit.bind(this);\n    this.state = { tab: 'organization' };\n  }\n\n  onRemove() {\n    const { history, remove } = this.props;\n    remove()\n      .then(() => (\n        history.replace('/')\n      ));\n  }\n\n  onSubmit(e) {\n    const { hide, update } = this.props;\n    const { target: form } = e;\n    e.preventDefault();\n    const name = form.name.value;\n    if (!name) {\n      return;\n    }\n    update({ name })\n      .then(() => hide('Org.Settings'));\n  }\n\n  render() {\n    const { name } = this.props;\n    const { tab } = this.state;\n    return (\n      <Dialog\n        id=\"Org.Settings\"\n      >\n        <Tabs>\n          <div\n            className={tab === 'organization' ? 'active' : ''}\n            onClick={() => this.setState({ tab: 'organization' })}\n          >\n            <Translate value=\"Org.Settings.organization\" />\n          </div>\n          <div\n            className={tab === 'dangerzone' ? 'active' : ''}\n            onClick={() => this.setState({ tab: 'dangerzone' })}\n          >\n            <Translate value=\"Org.Settings.dangerZone\" />\n          </div>\n        </Tabs>\n        {tab === 'organization' ? (\n          <Form onSubmit={this.onSubmit}>\n            <div>\n              <label>\n                <Translate value=\"Org.Settings.name\" />\n              </label>\n              <input\n                defaultValue={name}\n                type=\"text\"\n                name=\"name\"\n                required\n                autoFocus\n              />\n            </div>\n            <div className=\"submit\">\n              <Button\n                type=\"submit\"\n              >\n                <TiTick />\n                <Translate value=\"Org.Settings.save\" />\n              </Button>\n            </div>\n          </Form>\n        ) : null}\n        {tab === 'dangerzone' ? (\n          <DangerZone>\n            <div className=\"submit\">\n              <Button\n                type=\"button\"\n                onClick={this.onRemove}\n              >\n                <TiTimes />\n                <Translate value=\"Org.Settings.remove\" />\n              </Button>\n            </div>\n          </DangerZone>\n        ) : null}\n      </Dialog>\n    );\n  }\n}\n\nSettings.propTypes = {\n  /* eslint-disable react/forbid-prop-types */\n  history: PropTypes.object.isRequired,\n  /* eslint-enable react/forbid-prop-types */\n  name: PropTypes.string.isRequired,\n  hide: PropTypes.func.isRequired,\n  remove: PropTypes.func.isRequired,\n  update: PropTypes.func.isRequired,\n};\n\nexport default withRouter(connect(\n  ({ org: { name } }) => ({ name }),\n  {\n    hide,\n    remove,\n    update,\n  }\n)(Settings));\n","import PropTypes from 'prop-types';\nimport React, { PureComponent } from 'react';\nimport { TiTick, TiTimes, TiTrash } from 'react-icons/ti';\nimport { connect } from 'react-redux';\nimport { Translate } from 'react-redux-i18n';\nimport styled from 'styled-components';\nimport {\n  fetchUsers as fetch,\n  removeUser,\n  resolveRequest,\n} from '@/actions/org';\nimport Button from '@/components/ui/button';\nimport Dialog from '@/components/ui/dialog';\nimport API from '@/services/api';\n\nconst Scroll = styled.div`\n  max-height: 400px;\n  overflow-y: auto;\n  > div.empty {\n    text-align: center;\n    color: #999;\n    font-size: 1.5em;\n  }\n`;\n\nconst User = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  width: 100%;\n  margin-bottom: 0.5rem;\n  &:last-child {\n    margin-bottom: 0;\n  }\n  > div {\n    display: flex;\n    align-items: center;\n    > button {\n      margin-left: 0.5rem;\n    }\n    > img {\n      width: 32px;\n      height: 32px;\n      border-radius: 16px;\n      margin-right: 0.5rem;\n      vertical-align: middle;\n    }\n  }\n  > button {\n    display: none;\n    padding: 0.2rem 1rem;\n    font-size: 1.4rem;\n  }\n  &:hover > button {\n    display: flex;\n  }\n`;\n\nclass Users extends PureComponent {\n  componentDidMount() {\n    const { fetch } = this.props;\n    fetch();\n  }\n\n  render() {\n    const {\n      list,\n      removeUser,\n      resolveRequest,\n    } = this.props;\n    return (\n      <Dialog\n        id=\"Org.ManageUsers\"\n        width=\"512px\"\n      >\n        <Scroll>\n          {list.map(({\n            _id,\n            isRequest,\n            name,\n          }) => (\n            <User key={_id}>\n              <div>\n                <img\n                  src={`${API.baseURL}user/${_id}/photo?auth=${API.token}`}\n                />\n                {name}\n              </div>\n              {isRequest ? (\n                <div>\n                  <Button\n                    type=\"button\"\n                    onClick={() => resolveRequest({ user: _id, resolution: 'decline' })}\n                  >\n                    <TiTimes />\n                    <Translate value=\"Org.ManageUsers.decline\" />\n                  </Button>\n                  <Button\n                    type=\"button\"\n                    onClick={() => resolveRequest({ user: _id, resolution: 'approve' })}\n                    primary\n                  >\n                    <TiTick />\n                    <Translate value=\"Org.ManageUsers.approve\" />\n                  </Button>\n                </div>\n              ) : (\n                <Button\n                  type=\"button\"\n                  onClick={() => removeUser(_id)}\n                >\n                  <TiTrash />\n                </Button>\n              )}\n            </User>\n          ))}\n          {!list.length ? (\n            <div className=\"empty\">\n              <p>\n                <Translate value=\"Org.ManageUsers.empty\" />\n              </p>\n            </div>\n          ) : null}\n        </Scroll>\n      </Dialog>\n    );\n  }\n}\n\nUsers.propTypes = {\n  list: PropTypes.arrayOf(PropTypes.shape({\n    _id: PropTypes.string.isRequired,\n    isRequest: PropTypes.bool,\n    name: PropTypes.string.isRequired,\n  })).isRequired,\n  fetch: PropTypes.func.isRequired,\n  removeUser: PropTypes.func.isRequired,\n  resolveRequest: PropTypes.func.isRequired,\n};\n\nexport default connect(\n  ({\n    org: {\n      users: list,\n    },\n  }) => ({\n    list,\n  }),\n  {\n    fetch,\n    removeUser,\n    resolveRequest,\n  }\n)(Users);\n","import PropTypes from 'prop-types';\nimport React, { PureComponent } from 'react';\nimport {\n  TiClipboard,\n  TiCog,\n  TiGroup,\n  TiMessages,\n  TiUpload,\n} from 'react-icons/ti';\nimport { connect } from 'react-redux';\nimport { Translate } from 'react-redux-i18n';\nimport styled from 'styled-components';\nimport { hide as hideDialog, show as showDialog } from '@/actions/dialog';\nimport {\n  fetch,\n  requestAccess,\n  reset,\n  updateImage,\n} from '@/actions/org';\nimport CreateRoom from '@/components/org/createRoom';\nimport Rooms from '@/components/org/rooms';\nimport Settings from '@/components/org/settings';\nimport Users from '@/components/org/users';\nimport Button from '@/components/ui/button';\nimport Login from '@/components/ui/login';\nimport Page from '@/components/ui/page';\nimport API from '@/services/api';\n\nconst NavWidth = '212px';\n\nconst Layout = styled(Page)`\n  flex-direction: row;\n  > div {\n    box-sizing: border-box;\n    flex-shrink: 0;\n  }\n`;\n\nconst Nav = styled.div`\n  display: flex;\n  width: ${NavWidth};\n  flex-direction: column;\n  align-items: center;\n  padding: 1rem;\n  background: #222;\n  color: #eee;\n`;\n\nconst Content = styled.div`\n  width: calc(100% - ${NavWidth});\n  display: flex;\n  flex-direction: column;\n`;\n\nconst uploadButton = `\n  > button {\n    position: absolute;\n    bottom: 0;\n    right: 0;\n    padding: 0.25rem;\n    display: flex;\n    font-size: 1.5em;\n    border-radius: 2px 0 0 0;\n    opacity: 0;\n    transition: opacity ease-out .2s;\n  }\n  &:hover > button {\n    opacity: 1;    \n  }\n`;\n\nconst Logo = styled.div`\n  position: relative;\n  > img {\n    width: 180px;\n    height: 180px;\n    background: #000;\n    overflow: hidden;\n    vertical-align: middle;\n  }\n  ${uploadButton}\n`;\n\nconst Name = styled.div`\n  width: 100%;\n  font-size: 1.666em;\n  padding: 1rem 0 0.5rem;\n`;\n\nconst Url = styled.div`\n  display: flex;\n  justify-content: space-between;\n  width: 100%;\n  padding: 0 0 1.5rem;\n  color: #aaa;\n  user-select: all;\n  > a {\n    font-size: 1.5em;\n  }\n`;\n\nconst Actions = styled.div`\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  > button {\n    width: 100%;\n    margin: 0 0 0.5rem;\n    justify-content: flex-start;\n    > svg {\n      font-size: 1.5em;\n      margin-right: 0.25rem;\n    }\n    .count {\n      display: flex;\n      margin-left: auto;\n      align-items: center;\n      justify-content: center;\n      width: 18px;\n      height: 18px;\n      background-color: #393;\n      border-radius: 9px;\n      font-size: 0.85em;\n      line-height: 1em;\n      transition: background-color ease-out .2s;\n      will-change: background-color;\n      transform: translate(25%, 0);\n    }\n    &:hover .count {\n      background-color: #111;\n    }\n  }\n`;\n\nconst Cover = styled.div`\n  flex-shrink: 0;\n  background: #000;\n  background-repeat: no-repeat;\n  background-size: cover;\n  background-position: center;\n  background-image: url(${props => props.cover});\n  width: 100%;\n  height: 312px;\n  position: relative;\n  ${uploadButton}\n`;\n\nconst Section = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  padding: 3rem 0;\n  > p {\n    font-size: 1.5rem;\n    color: #666;\n  }\n  > button > svg {\n    font-size: 2em;\n  }\n`;\n\nclass Org extends PureComponent {\n  componentWillMount() {\n    this.fetch();\n  }\n\n  componentDidUpdate({ isAuth: wasAuth }) {\n    const { isAuth } = this.props;\n    if (wasAuth !== isAuth) {\n      this.fetch();\n    }\n  }\n\n  componentWillUnmount() {\n    const { hideDialog, reset } = this.props;\n    reset();\n    hideDialog('Org.CreateRoom');\n    hideDialog('Org.Settings');\n    hideDialog('Org.ManageUsers');\n  }\n\n  fetch() {\n    const {\n      match: { params: { slug } },\n      fetch,\n      history,\n    } = this.props;\n    fetch(slug)\n      .catch(() => (\n        history.replace('404')\n      ));\n  }\n\n  updateImage(image) {\n    const {\n      updateImage,\n    } = this.props;\n    const input = document.createElement('input');\n    input.accept = 'image/*';\n    input.type = 'file';\n    input.onchange = () => {\n      const [file] = input.files;\n      if (file) {\n        updateImage({ image, blob: file })\n          .then(() => (\n            window.location.reload()\n          ));\n      }\n    };\n    input.click();\n  }\n\n  render() {\n    const {\n      hasLoaded,\n      id,\n      isActive,\n      isAdmin,\n      isAuth,\n      isUser,\n      requestAccess,\n      match: { params: { slug } },\n      name,\n      pendingRequests,\n      showDialog,\n    } = this.props;\n    if (!hasLoaded) {\n      return null;\n    }\n    return (\n      <Layout>\n        <Nav>\n          <Logo>\n            <img src={`${API.baseURL}org/${id}/logo`} />\n            {isAdmin ? (\n              <Button\n                type=\"button\"\n                onClick={() => this.updateImage('logo')}\n              >\n                <TiUpload />\n              </Button>\n            ) : null}\n          </Logo>\n          <Name>\n            { name }\n          </Name>\n          <Url>\n            {`${__DOMAIN__}${__BASENAME__}${slug}`}\n            {isAdmin ? (\n              <a onClick={() => document.execCommand('copy')}>\n                <TiClipboard />\n              </a>\n            ) : null}\n          </Url>\n          {isAdmin ? (\n            <Actions>\n              <Button\n                type=\"button\"\n                onClick={() => showDialog('Org.ManageUsers')}\n              >\n                <TiGroup />\n                <Translate value=\"Org.Nav.manageUsers\" />\n                {pendingRequests > 0 ? (\n                  <span className=\"count\">{pendingRequests}</span>\n                ) : null}\n              </Button>\n              <Button\n                type=\"button\"\n                onClick={() => showDialog('Org.CreateRoom')}\n              >\n                <TiMessages />\n                <Translate value=\"Org.Nav.createRoom\" />\n              </Button>\n              <Button\n                type=\"button\"\n                onClick={() => showDialog('Org.Settings')}\n              >\n                <TiCog />\n                <Translate value=\"Org.Nav.settings\" />\n              </Button>\n            </Actions>\n          ) : null}\n        </Nav>\n        <Content>\n          <Cover cover={`${API.baseURL}org/${id}/cover`}>\n            {isAdmin ? (\n              <Button\n                type=\"button\"\n                onClick={() => this.updateImage('cover')}\n              >\n                <TiUpload />\n              </Button>\n            ) : null}\n          </Cover>\n          {isUser && isActive ? (\n            <Rooms org={slug} />\n          ) : null}\n          {isUser && !isActive ? (\n            <Section>\n              <p>\n                Your account is pending approval\n              </p>\n            </Section>\n          ) : null}\n          {isAuth && !isUser ? (\n            <Section>\n              <p>\n                Your are not a student of this organization\n              </p>\n              <Button\n                type=\"button\"\n                onClick={requestAccess}\n              >\n                Request access\n              </Button>\n            </Section>\n          ) : null}\n          {!isAuth ? (\n            <Section>\n              <p>\n                Welcome, please sign-in:\n              </p>\n              <Login />\n            </Section>\n          ) : null}\n          {isAdmin ? (\n            <div>\n              <CreateRoom />\n              <Settings />\n              <Users />\n            </div>\n          ) : null}\n        </Content>\n      </Layout>\n    );\n  }\n}\n\nOrg.propTypes = {\n  match: PropTypes.shape({\n    params: PropTypes.shape({\n      slug: PropTypes.string.isRequired,\n    }).isRequired,\n  }).isRequired,\n  hasLoaded: PropTypes.bool.isRequired,\n  /* eslint-disable react/forbid-prop-types */\n  history: PropTypes.object.isRequired,\n  /* eslint-enable react/forbid-prop-types */\n  id: PropTypes.string.isRequired,\n  isActive: PropTypes.bool.isRequired,\n  isAdmin: PropTypes.bool.isRequired,\n  isAuth: PropTypes.bool.isRequired,\n  isUser: PropTypes.bool.isRequired,\n  name: PropTypes.string.isRequired,\n  pendingRequests: PropTypes.number.isRequired,\n  fetch: PropTypes.func.isRequired,\n  hideDialog: PropTypes.func.isRequired,\n  requestAccess: PropTypes.func.isRequired,\n  reset: PropTypes.func.isRequired,\n  showDialog: PropTypes.func.isRequired,\n  updateImage: PropTypes.func.isRequired,\n};\n\nexport default connect(\n  ({\n    org: {\n      hasLoaded,\n      id,\n      isActive,\n      isAdmin,\n      isUser,\n      name,\n      pendingRequests,\n    },\n    user: {\n      isAuth,\n    },\n  }) => ({\n    hasLoaded,\n    id,\n    isActive,\n    isAdmin,\n    isAuth,\n    isUser,\n    name,\n    pendingRequests,\n  }),\n  {\n    fetch,\n    hideDialog,\n    requestAccess,\n    reset,\n    showDialog,\n    updateImage,\n  }\n)(Org);\n","import PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { I18n } from 'react-redux-i18n';\nimport { connect } from 'react-redux';\nimport Touches from 'touches';\nimport { addWheelListener, removeWheelListener } from 'wheel';\nimport API from '@/services/api';\n\nclass Canvas extends Component {\n  constructor(props) {\n    super(props);\n    this.dom = React.createRef();\n    this.onDrop = this.onDrop.bind(this);\n    this.onPointerWheel = this.onPointerWheel.bind(this);\n    this.onResize = this.onResize.bind(this);\n    // This is what controls the viewport translation\n    this.origin = { x: 0, y: 0 };\n    // This is what controls the viewport scaling\n    this.scale = 1;\n    // The peer photos need to be downloaded from the API\n    // This is where we cache the loaded Image objects\n    this.peers = {};\n    // The photos are stored in the state as a base64 string\n    // We need to load the as Image objects in order to call ctx.drawImage\n    // (and also to extract their width & height for intersection testing)\n    // This is where we cache the loaded Image objects\n    this.photos = {};\n  }\n\n  componentDidMount() {\n    const { dom: { current: canvas } } = this;\n    // Load the inital set of photos\n    this.loadPhotos(this.props);\n    // Bind the events\n    canvas.addEventListener('dragover', Canvas.onDragOver, false);\n    canvas.addEventListener('drop', this.onDrop, false);\n    window.addEventListener('resize', this.onResize, false);\n    this.touches = Touches(window, {\n      filtered: true,\n      preventSimulated: false,\n    })\n      .on('start', this.onPointerStart.bind(this))\n      .on('move', this.onPointerMove.bind(this))\n      .on('end', this.onPointerEnd.bind(this));\n    addWheelListener(window, this.onPointerWheel);\n    // Initial resize (this will also call the initial draw)\n    this.onResize();\n  }\n\n  componentWillReceiveProps(props) {\n    // The redux state has changed...\n    // Load photos as Image objects and store them in the cache\n    this.loadPhotos(props);\n    // Redraw\n    this.draw(props);\n  }\n\n  shouldComponentUpdate() {\n    return false;\n  }\n\n  componentWillUnmount() {\n    const { dom: { current: canvas }, touches } = this;\n    // We're unloading the room\n    // Unbind all event handlers\n    touches.disable();\n    canvas.removeEventListener('dragover', Canvas.onDragOver);\n    canvas.removeEventListener('drop', this.onDrop);\n    removeWheelListener(window, this.onPointerWheel);\n    window.removeEventListener('resize', this.onResize);\n  }\n\n  static onDragOver(e) {\n    e.preventDefault();\n  }\n\n  onDrop(e) {\n    // The user dropped a file into the canvas\n    const { socket } = this.props;\n    const {\n      clientX,\n      clientY,\n      dataTransfer: { files: [file] },\n    } = e;\n    e.preventDefault();\n    // We're only interested in files\n    if (!file) {\n      return;\n    }\n    // Get the screen-space pointer in room-space\n    const origin = this.getPointer([clientX, clientY]);\n    // Read the file\n    const reader = new FileReader();\n    reader.onload = () => {\n      // Once it loads, send it to the room server:\n      socket.send(JSON.stringify({\n        type: 'ROOM/ADD_PHOTO',\n        payload: {\n          origin,\n          photo: reader.result.substr(reader.result.indexOf('base64') + 7),\n        },\n      }));\n    };\n    reader.readAsDataURL(file);\n  }\n\n  onPointerStart(e, pointer) {\n    const { photos, socket } = this.props;\n    const button = e.button || 0;\n    const { x, y } = this.getPointer(pointer);\n\n    // Get photo at pointer\n    const intersects = photos\n      .filter(({ _id, origin }) => {\n        const image = this.photos[_id];\n        // Filter it out if it hasn't been loaded\n        // yet into the cache as an Image object\n        if (!image) {\n          return false;\n        }\n        const { width, height } = image;\n        if (\n          x < origin.x\n          || x > origin.x + width\n          || y < origin.y\n          || y > origin.y + height\n        ) {\n          // The pointer is outside the bounds\n          return false;\n        }\n        // We got a hit!\n        return true;\n      });\n    // Reverse the filtered photos to get\n    // the one renderded on top first\n    intersects.reverse();\n    const photo = intersects[0];\n\n    if (\n      // Clicking the canvas (or right click)\n      // will drag it's origin\n      (button === 0 && !photo)\n      || (button === 2)\n    ) {\n      this.dragging = {\n        canvas: pointer,\n      };\n    } else if (\n      // Left click drags/removes photos\n      button === 0 && photo\n    ) {\n      if (e.shiftKey) {\n        // Shift+Click will remove the photo\n        socket.send(JSON.stringify({\n          type: 'ROOM/REMOVE_PHOTO',\n          payload: {\n            photo: photo._id,\n          },\n        }));\n      } else {\n        // Left click will drag the photo\n        this.dragging = {\n          offset: {\n            x: photo.origin.x - x,\n            y: photo.origin.y - y,\n          },\n          photo,\n        };\n      }\n    }\n  }\n\n  onPointerMove(e, pointer) {\n    const { dragging, origin, scale } = this;\n    const { peers } = this.props;\n    const { x, y } = this.getPointer(pointer);\n    peers.forEach(({ connection }) => {\n      if (\n        connection._channel\n        && connection._channel.readyState === 'open'\n      ) {\n        connection.send(new Int32Array([x, y]));\n      }\n    });\n    if (!dragging) {\n      return;\n    }\n    if (dragging.canvas) {\n      // Translate the canvas origin\n      origin.x += (pointer[0] - dragging.canvas[0]) / scale;\n      origin.y += (pointer[1] - dragging.canvas[1]) / scale;\n      dragging.canvas = pointer;\n    }\n    if (dragging.photo) {\n      // Translate the photo\n      const { offset, photo } = dragging;\n      photo.origin.x = x + offset.x;\n      photo.origin.y = y + offset.y;\n    }\n    // Redraw\n    this.draw();\n  }\n\n  onPointerEnd() {\n    const { dragging } = this;\n    const { socket } = this.props;\n    if (!dragging) {\n      return;\n    }\n    delete this.dragging;\n    if (dragging.photo) {\n      // Send the final translation to the server\n      // So it gets saved into the db and broadcasted to the peers\n      const { _id: photo, origin } = dragging.photo;\n      socket.send(JSON.stringify({\n        type: 'ROOM/MOVE_PHOTO',\n        payload: {\n          origin,\n          photo,\n        },\n      }));\n    }\n  }\n\n  onPointerWheel({ deltaY }) {\n    // Zoom the canvas in and out when the mouse wheel moves\n    const normalized = 1 + (Math.min(Math.max(-deltaY, -1), 1) * 0.075);\n    this.scale *= normalized;\n    this.scale = Math.min(Math.max(this.scale, 0.25), 2);\n    // Redraw\n    this.draw();\n  }\n\n  onResize() {\n    // Resize the canvas\n    const { dom: { current: canvas } } = this;\n    canvas.width = window.innerWidth;\n    canvas.height = window.innerHeight;\n    // Redraw\n    this.draw();\n  }\n\n  getPointer([x, y]) {\n    // Convert coordinates from screen-space to room-space\n    const { dom: { current: canvas }, origin, scale } = this;\n    return {\n      x: Math.round(((x - (canvas.width * 0.5)) / scale) - origin.x),\n      y: Math.round(((y - (canvas.height * 0.5)) / scale) - origin.y),\n    };\n  }\n\n  loadPhotos({ peers, photos }) {\n    // Go through all the peers in the redux state\n    peers.forEach(({ _id }) => {\n      // If it's not already in the cache, load it as an Image object\n      if (!this.peers[_id]) {\n        const img = new Image();\n        img.src = `${API.baseURL}user/${_id}/photo?auth=${API.token}`;\n        img.onload = () => (\n          // Redraw once it's loaded into the cache\n          this.draw()\n        );\n        this.peers[_id] = img;\n      }\n    });\n    // Go through all the photos in the redux state\n    photos.forEach(({ _id, photo }) => {\n      // If it's not already in the cache, load it as an Image object\n      if (!this.photos[_id]) {\n        const img = new Image();\n        img.src = `data:image/jpeg;base64,${photo}`;\n        img.onload = () => (\n          // Redraw once it's loaded into the cache\n          this.draw()\n        );\n        this.photos[_id] = img;\n      }\n    });\n  }\n\n  draw(props) {\n    const { dom: { current: canvas }, origin, scale } = this;\n    const { name, peers, photos } = props || this.props;\n    const ctx = canvas.getContext('2d');\n    // Reset canvas context\n    canvas.width = canvas.width;\n    // Room-space coordinates start at the middle of the canvas\n    ctx.translate(canvas.width * 0.5, canvas.height * 0.5);\n    // Apply user scale\n    ctx.scale(scale, scale);\n    // Apply user translation\n    ctx.translate(origin.x, origin.y);\n    // Draw room name at 0,0\n    ctx.textAlign = 'center';\n    ctx.textBaseline = 'middle';\n    ctx.fillStyle = '#999';\n    ctx.font = '32px Arial';\n    ctx.fillText(I18n.t(`Room.${name ? 'welcome' : 'joining'}`, { name }), 0, 0);\n    // Go through all the photos in the redux state\n    photos.forEach(({ _id, origin }) => {\n      // Check the cache to see if the photo has been\n      // already loaded as an Image object by \"loadPhotos\"\n      if (this.photos[_id]) {\n        // Draw the cached Image object\n        ctx.drawImage(this.photos[_id], origin.x, origin.y);\n      }\n    });\n    // Go through all the peers in the redux state\n    peers.forEach(({ _id, pointer }) => {\n      // Check the cache to see if the peer photo has been\n      // already loaded as an Image object by \"loadPhotos\"\n      // and if we have received a pointer position\n      if (this.peers[_id] && pointer) {\n        const [x, y] = pointer;\n        // Scale size with viewport\n        const radius = 24 / scale;\n        // Draw outer circle\n        ctx.beginPath();\n        ctx.arc(x, y, radius, 0, 2 * Math.PI);\n        ctx.fill();\n        // Clipping mask circle\n        ctx.save();\n        ctx.beginPath();\n        ctx.arc(x, y, radius * 0.9, 0, 2 * Math.PI);\n        ctx.clip();\n        // Draw the cached Image object\n        ctx.drawImage(this.peers[_id], x - radius, y - radius, radius * 2, radius * 2);\n        ctx.restore();\n      }\n    });\n  }\n\n  render() {\n    const { dom } = this;\n    return (\n      <canvas ref={dom} />\n    );\n  }\n}\n\nCanvas.propTypes = {\n  // eslint-disable-next-line react/no-unused-prop-types\n  name: PropTypes.string.isRequired,\n  peers: PropTypes.arrayOf(PropTypes.shape({\n    _id: PropTypes.string.isRequired,\n    connection: PropTypes.object.isRequired,\n    pointer: PropTypes.arrayOf(PropTypes.number),\n  })).isRequired,\n  photos: PropTypes.arrayOf(PropTypes.shape({\n    origin: PropTypes.shape({\n      x: PropTypes.number.isRequired,\n      y: PropTypes.number.isRequired,\n    }),\n    photo: PropTypes.string.isRequired,\n  })).isRequired,\n  socket: PropTypes.oneOfType([PropTypes.bool, PropTypes.object]).isRequired,\n};\n\nexport default connect(\n  ({\n    room: {\n      name,\n      peers,\n      photos,\n      socket,\n    },\n  }) => ({\n    name,\n    peers,\n    photos,\n    socket,\n  })\n)(Canvas);\n","import PropTypes from 'prop-types';\nimport { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { hideLoading, showLoading } from 'react-redux-loading-bar';\nimport { withRouter } from 'react-router';\nimport WebSocket from 'reconnecting-websocket';\nimport Peer from 'simple-peer';\nimport {\n  addPhoto,\n  join,\n  movePhoto,\n  removePhoto,\n  reset,\n  peerJoin,\n  peerLeave,\n  peerPointer,\n  peerSignal,\n  peerStream,\n} from '@/actions/room';\nimport { startStream } from '@/actions/user';\nimport * as types from '@/actions/types';\nimport API from '@/services/api';\n\nclass Events extends Component {\n  constructor(props) {\n    super(props);\n    this.onMessage = this.onMessage.bind(this);\n  }\n\n  componentWillMount() {\n    const {\n      match: { params: { org, slug } },\n      settings: {\n        audioInput,\n        videoInput,\n      },\n      startStream,\n    } = this.props;\n\n    // Connect to room server\n    this.connectToServer({ org, slug });\n\n    // Open audio+video stream\n    navigator.mediaDevices.getUserMedia({\n      audio: audioInput ? { deviceId: { exact: audioInput } } : true,\n      video: {\n        width: 640,\n        height: 640,\n        ...(videoInput ? { deviceId: { exact: videoInput } } : { facingMode: 'user' }),\n      },\n    })\n      .then(startStream)\n      .catch(() => {\n        // Failed to get video stream.. Try with just audio\n        navigator.mediaDevices.getUserMedia({\n          audio: true,\n          video: false,\n        })\n          .then(startStream)\n          .catch(() => {});\n      });\n  }\n\n  componentWillReceiveProps({ match: { params: { org, slug } } }) {\n    const {\n      match: { params: { org: currentOrg, slug: currentSlug } },\n      reset,\n    } = this.props;\n    if (currentOrg !== org || currentSlug !== slug) {\n      reset();\n      this.connectToServer({ org, slug });\n    }\n  }\n\n  shouldComponentUpdate() {\n    return false;\n  }\n\n  componentWillUnmount() {\n    const { socket } = this;\n    const { hideLoading, reset } = this.props;\n    if (socket.readyState === WebSocket.CONNECTING) {\n      hideLoading();\n    }\n    socket.close(1000);\n    reset();\n  }\n\n  onMessage({ data }) {\n    const { socket } = this;\n    const {\n      match: { params: { org } },\n      addPhoto,\n      history,\n      join,\n      movePhoto,\n      peerJoin,\n      peerLeave,\n      peerSignal,\n      removePhoto,\n    } = this.props;\n    let event;\n    try {\n      event = JSON.parse(data);\n    } catch (e) {\n      return;\n    }\n    switch (event.type) {\n      case types.ROOM_ADD_PHOTO:\n        addPhoto(event.payload);\n        break;\n      case types.ROOM_MOVE_PHOTO:\n        movePhoto(event.payload);\n        break;\n      case types.ROOM_REMOVE_PHOTO:\n        removePhoto(event.payload);\n        break;\n      case types.ROOM_JOIN:\n        join({\n          ...event.payload,\n          peers: event.payload.peers.map(peer => this.connectToPeer(peer, true)),\n          socket,\n        });\n        break;\n      case types.ROOM_PEER_JOIN:\n        peerJoin(this.connectToPeer(event.payload));\n        break;\n      case types.ROOM_PEER_LEAVE:\n        peerLeave(event.payload);\n        break;\n      case types.ROOM_PEER_SIGNAL:\n        peerSignal(event.payload);\n        break;\n      case types.ROOM_ERROR:\n        history.replace(\n          event.payload === 'FULL_ROOM' ? `/${org}` : '/404'\n        );\n        break;\n      default:\n        break;\n    }\n  }\n\n  connectToServer({ org, slug }) {\n    const {\n      hideLoading,\n      showLoading,\n    } = this.props;\n    if (this.socket) {\n      if (this.socket.readyState === WebSocket.CONNECTING) {\n        hideLoading();\n      }\n      this.socket.close(1000);\n    }\n    showLoading();\n    this.socket = new WebSocket(\n      `${API.baseURL.replace(/http/, 'ws')}org/${org}/room/${slug}`,\n      API.token\n    );\n    this.socket.onopen = () => {\n      this.socket.onclose = null;\n      this.socket.onerror = null;\n      hideLoading();\n    };\n    this.socket.onmessage = this.onMessage;\n  }\n\n  connectToPeer(peer, initiator = false) {\n    const { socket } = this;\n    const { stream, peerPointer, peerStream } = this.props;\n    peer.connection = new Peer({\n      initiator,\n      stream,\n    });\n    peer.connection.on('signal', (signal) => {\n      socket.send(JSON.stringify({\n        type: 'ROOM/PEER_SIGNAL',\n        payload: {\n          peer: peer.peer,\n          signal,\n        },\n      }));\n    });\n    peer.connection.on('data', ({ buffer }) => (\n      peerPointer({ peer: peer.peer, pointer: [...(new Int32Array(buffer))] })\n    ));\n    peer.connection.on('stream', stream => (\n      peerStream({ peer: peer.peer, stream })\n    ));\n    return peer;\n  }\n\n  render() {\n    return null;\n  }\n}\n\nEvents.propTypes = {\n  /* eslint-disable react/forbid-prop-types */\n  history: PropTypes.object.isRequired,\n  /* eslint-enable react/forbid-prop-types */\n  match: PropTypes.shape({\n    params: PropTypes.shape({\n      org: PropTypes.string.isRequired,\n      slug: PropTypes.string.isRequired,\n    }).isRequired,\n  }).isRequired,\n  settings: PropTypes.shape({\n    audioInput: PropTypes.string.isRequired,\n    videoInput: PropTypes.string.isRequired,\n  }).isRequired,\n  stream: PropTypes.oneOfType([PropTypes.bool, PropTypes.object]).isRequired,\n  addPhoto: PropTypes.func.isRequired,\n  hideLoading: PropTypes.func.isRequired,\n  join: PropTypes.func.isRequired,\n  movePhoto: PropTypes.func.isRequired,\n  removePhoto: PropTypes.func.isRequired,\n  reset: PropTypes.func.isRequired,\n  peerJoin: PropTypes.func.isRequired,\n  peerLeave: PropTypes.func.isRequired,\n  peerPointer: PropTypes.func.isRequired,\n  peerSignal: PropTypes.func.isRequired,\n  peerStream: PropTypes.func.isRequired,\n  showLoading: PropTypes.func.isRequired,\n  startStream: PropTypes.func.isRequired,\n};\n\nexport default withRouter(connect(\n  ({ user: { settings, stream } }) => ({ settings, stream }),\n  {\n    addPhoto,\n    hideLoading,\n    join,\n    movePhoto,\n    removePhoto,\n    reset,\n    peerJoin,\n    peerLeave,\n    peerPointer,\n    peerSignal,\n    peerStream,\n    showLoading,\n    startStream,\n  }\n)(Events));\n","import * as types from './types';\n\nexport function addPhoto({ _id, origin, photo }) {\n  return {\n    type: types.ROOM_ADD_PHOTO,\n    payload: { _id, origin, photo },\n  };\n}\n\nexport function movePhoto({ origin, photo }) {\n  return {\n    type: types.ROOM_MOVE_PHOTO,\n    payload: { origin, photo },\n  };\n}\n\nexport function join({\n  name,\n  peers,\n  photos,\n  socket,\n}) {\n  return {\n    type: types.ROOM_JOIN,\n    payload: {\n      name,\n      peers,\n      photos,\n      socket,\n    },\n  };\n}\n\nexport function peerJoin(peer) {\n  return {\n    type: types.ROOM_PEER_JOIN,\n    payload: { peer },\n  };\n}\n\nexport function peerLeave({ peer }) {\n  return {\n    type: types.ROOM_PEER_LEAVE,\n    payload: { peer },\n  };\n}\n\nexport function peerPointer({ peer, pointer }) {\n  return {\n    type: types.ROOM_PEER_POINTER,\n    payload: { peer, pointer },\n  };\n}\n\nexport function peerSignal({ peer, signal }) {\n  return {\n    type: types.ROOM_PEER_SIGNAL,\n    payload: { peer, signal },\n  };\n}\n\nexport function peerStream({ peer, stream }) {\n  return {\n    type: types.ROOM_PEER_STREAM,\n    payload: { peer, stream },\n  };\n}\n\nexport function removePhoto({ photo }) {\n  return {\n    type: types.ROOM_REMOVE_PHOTO,\n    payload: { photo },\n  };\n}\n\nexport function reset() {\n  return {\n    type: types.ROOM_RESET,\n  };\n}\n","import PropTypes from 'prop-types';\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport styled from 'styled-components';\nimport API from '@/services/api';\nimport Video from './video';\n\nconst Listing = styled.div`\n  position: absolute;\n  top: 100px;\n  right: 0;\n  > img, > div > video {\n    display: block;\n    background: #000;\n    width: 100px;\n    height: 100px;\n    vertical-align: middle;\n    box-shadow: 0 0 10px rgba(0, 0, 0, .5);\n  }\n`;\n\nconst Peers = ({ peers }) => (\n  <Listing>\n    {peers.map(({\n      _id,\n      peer,\n      video,\n    }) => (\n      video && video.srcObject.getVideoTracks().length ? (\n        <Video\n          key={peer}\n          video={video}\n        />\n      ) : (\n        <img\n          key={peer}\n          src={`${API.baseURL}user/${_id}/photo?auth=${API.token}`}\n        />\n      )\n    ))}\n  </Listing>\n);\n\nPeers.propTypes = {\n  peers: PropTypes.arrayOf(PropTypes.shape({\n    _id: PropTypes.string.isRequired,\n    peer: PropTypes.string.isRequired,\n    video: PropTypes.object,\n  })).isRequired,\n};\n\nexport default connect(\n  ({\n    room: { peers },\n  }) => ({\n    peers,\n  })\n)(Peers);\n","import React from 'react';\nimport Canvas from '@/components/room/canvas';\nimport Events from '@/components/room/events';\nimport Peers from '@/components/room/peers';\n\nconst Room = () => (\n  <div>\n    <Canvas />\n    <Events />\n    <Peers />\n  </div>\n);\n\nexport default Room;\n","import React from 'react';\nimport { hot } from 'react-hot-loader';\nimport { connect } from 'react-redux';\nimport { Route as RouteComponent, Redirect, Switch } from 'react-router-dom';\nimport Layout from '@/layout';\nimport Landing from './landing';\nimport NotFound from './404';\nimport Org from './org';\nimport Room from './room';\n\nconst Route = connect(\n  ({ user: { isAuth } }) => ({ isAuth })\n)(({\n  component: Component,\n  isAuth,\n  requiresAuth,\n  requiresNoAuth,\n  ...rest\n}) => {\n  const isForbidden = (\n    (requiresAuth && !isAuth)\n    || (requiresNoAuth && isAuth)\n  );\n  return (\n    <RouteComponent\n      {...rest}\n      render={props => (\n        (isForbidden) ? (\n          <Redirect to=\"/\" />\n        ) : (\n          <Component {...props} />\n        )\n      )}\n    />\n  );\n});\n\nconst Root = () => (\n  <Layout>\n    <Switch>\n      <Route exact path=\"/\" component={Landing} />\n      <Route exact path=\"/404\" component={NotFound} />\n      <Route exact path=\"/:org/:slug\" component={Room} requiresAuth />\n      <Route exact path=\"/:slug\" component={Org} />\n      <Route path=\"*\" component={NotFound} />\n    </Switch>\n  </Layout>\n);\n\nexport default hot(module)(Root);\n","import { createBrowserHistory } from 'history';\nimport React from 'react';\nimport { render } from 'react-dom';\nimport { applyMiddleware, createStore, compose as productionCompose } from 'redux';\nimport promiseMiddleware from 'redux-promise-middleware';\nimport { Provider } from 'react-redux';\nimport { loadingBarMiddleware } from 'react-redux-loading-bar';\nimport { Router } from 'react-router-dom';\nimport thunkMiddleware from 'redux-thunk';\nimport { refreshSession } from '@/actions/user';\nimport syncTranslationWithStore, { load as reloadLocales } from '@/locales';\nimport rootReducer from '@/reducers';\nimport Root from '@/routes';\n\n// Create Redux Store\nconst devCompose = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__;\nconst compose = !__PRODUCTION__ && devCompose ? devCompose : productionCompose;\nconst store = createStore(\n  rootReducer,\n  {},\n  compose(\n    applyMiddleware(thunkMiddleware, promiseMiddleware, loadingBarMiddleware())\n  )\n);\nsyncTranslationWithStore(store);\n\n// Revive session from localStorage\nif (store.getState().user.isAuth) {\n  store.dispatch(refreshSession());\n}\n\n// Create router history\nconst history = createBrowserHistory({\n  basename: __BASENAME__,\n});\n\n// Support initial hash route from the ghpages-spa-webpack-plugin\nif (window.location.hash) {\n  history.replace(`/${window.location.hash.substr(2)}`);\n}\n\n// Disable contextual menus\nwindow.addEventListener('contextmenu', e => (\n  e.preventDefault()\n), false);\n\n// Render the page\nconst mount = document.getElementById('mount');\nrender(\n  <Provider store={store}>\n    <Router history={history}>\n      <Root />\n    </Router>\n  </Provider>,\n  mount\n);\n\n// Hot reload locales & reducers\nif (!__PRODUCTION__ && module.hot) {\n  module.hot.accept('@/locales', () => reloadLocales(store));\n  module.hot.accept('@/reducers', () => store.replaceReducer(rootReducer));\n}\n"],"sourceRoot":""}